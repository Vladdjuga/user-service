2025-05-12 22:44:09.458 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-12 22:44:09.682 +03:00 [DBG] Hosting starting
2025-05-12 22:44:09.703 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-12 22:44:09.733 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-12 22:44:09.746 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-12 22:44:09.771 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-12 22:44:09.779 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 22:44:09.786 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-12 22:44:09.793 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 22:44:09.808 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-12 22:44:09.811 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-12 22:44:09.816 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-12 22:44:09.819 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-12 22:44:09.980 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-12 22:44:09.990 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-12 22:44:09.998 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-12 22:44:10.002 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-12 22:44:10.004 +03:00 [INF] Hosting environment: Development
2025-05-12 22:44:10.007 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-12 22:44:10.010 +03:00 [DBG] Hosting started
2025-05-12 22:45:02.590 +03:00 [DBG] Connection id "0HNCHHLUC17E7" accepted.
2025-05-12 22:45:02.593 +03:00 [DBG] Connection id "0HNCHHLUC17E7" started.
2025-05-12 22:45:02.696 +03:00 [DBG] Connection id "0HNCHHLUC17E7": Invalid content received on connection. Possible incorrect HTTP version detected. Expected HTTP/2 but received HTTP/1.1.
2025-05-12 22:45:02.706 +03:00 [DBG] Connection id "0HNCHHLUC17E7" received FIN.
2025-05-12 22:45:02.709 +03:00 [DBG] Connection id "0HNCHHLUC17E7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:45:02.710 +03:00 [DBG] Connection id "0HNCHHLUC17E7" is closed. The last processed stream ID was 0.
2025-05-12 22:45:02.720 +03:00 [DBG] The connection queue processing loop for 0HNCHHLUC17E7 completed.
2025-05-12 22:45:02.725 +03:00 [DBG] Connection id "0HNCHHLUC17E7" stopped.
2025-05-12 22:45:02.788 +03:00 [DBG] Connection id "0HNCHHLUC17E8" received FIN.
2025-05-12 22:45:02.789 +03:00 [DBG] Connection id "0HNCHHLUC17E8" accepted.
2025-05-12 22:45:02.790 +03:00 [DBG] Connection id "0HNCHHLUC17E8" started.
2025-05-12 22:45:02.792 +03:00 [DBG] Connection id "0HNCHHLUC17E8" is closed. The last processed stream ID was 0.
2025-05-12 22:45:02.793 +03:00 [DBG] Connection id "0HNCHHLUC17E8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:45:02.796 +03:00 [DBG] The connection queue processing loop for 0HNCHHLUC17E8 completed.
2025-05-12 22:45:02.798 +03:00 [DBG] Connection id "0HNCHHLUC17E8" stopped.
2025-05-12 22:45:06.373 +03:00 [DBG] Connection id "0HNCHHLUC17E9" accepted.
2025-05-12 22:45:06.374 +03:00 [DBG] Connection id "0HNCHHLUC17E9" started.
2025-05-12 22:45:08.204 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/ - null null
2025-05-12 22:45:08.207 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-12 22:45:08.227 +03:00 [DBG] No candidates found for the request path '/swagger/'
2025-05-12 22:45:08.228 +03:00 [DBG] Request did not match any endpoints
2025-05-12 22:45:08.255 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:45:08.258 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/ - 301 0 null 55.6877ms
2025-05-12 22:45:08.267 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/index.html - null null
2025-05-12 22:45:08.270 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-12 22:45:08.271 +03:00 [DBG] Request did not match any endpoints
2025-05-12 22:45:08.470 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:45:08.471 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/index.html - 200 null text/html;charset=utf-8 203.7522ms
2025-05-12 22:45:08.741 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/v1/swagger.json - null null
2025-05-12 22:45:08.744 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-12 22:45:08.746 +03:00 [DBG] Request did not match any endpoints
2025-05-12 22:45:08.927 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:45:08.929 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 187.6605ms
2025-05-12 22:45:22.639 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/login - application/json 51
2025-05-12 22:45:22.649 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-12 22:45:22.652 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-12 22:45:22.655 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:45:22.658 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 22:45:22.703 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:45:22.707 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:45:22.735 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 22:45:22.739 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:45:22.741 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:45:22.742 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 22:45:22.745 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:45:22.747 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 22:45:22.751 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:45:22.754 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:45:22.761 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-12 22:45:22.764 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-05-12 22:45:22.767 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 22:45:22.781 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000004": started reading request body.
2025-05-12 22:45:22.783 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000004": done reading request body.
2025-05-12 22:45:22.804 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-05-12 22:45:22.806 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:45:22.807 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:45:22.809 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-12 22:45:22.818 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:45:22.833 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-05-12 22:45:22.837 +03:00 [INF] Starting to login User: admin - admin123
2025-05-12 22:45:23.080 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-12 22:45:23.568 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-12 22:45:23.618 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-12 22:45:23.763 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-12 22:45:23.897 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-12 22:45:23.901 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-12 22:45:23.950 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-05-12 22:45:23.951 +03:00 [DBG] The index {'UserId'} was not created on entity type 'UserContactEntity' as the properties are already covered by the index {'UserId', 'ContactId'}.
2025-05-12 22:45:24.153 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-05-12 22:45:24.361 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-12 22:45:24.495 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(o => o.Username.Equals(__userName_0))'
2025-05-12 22:45:25.016 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-12 22:45:25.091 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:45:25.141 +03:00 [DBG] Created DbConnection. (41ms).
2025-05-12 22:45:25.149 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:45:26.668 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:45:26.678 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:45:26.686 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-05-12 22:45:26.702 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2025-05-12 22:45:26.721 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-05-12 22:45:26.801 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-05-12 22:45:26.863 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:45:26.876 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 61ms reading results.
2025-05-12 22:45:26.884 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:45:26.896 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (11ms).
2025-05-12 22:45:26.968 +03:00 [INF] Login User: admin - admin123
2025-05-12 22:45:26.970 +03:00 [INF] Token generated for user - admin. Token : Application.Common.Result`1[System.String]
2025-05-12 22:45:26.980 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 4138.0176ms.
2025-05-12 22:45:26.992 +03:00 [INF] Setting HTTP status code 200.
2025-05-12 22:45:26.994 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-12 22:45:27.017 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 4261.2841ms
2025-05-12 22:45:27.020 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:45:27.027 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:45:27.034 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-12 22:45:27.046 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:45:27.052 +03:00 [DBG] Disposed connection to database '' on server '' (7ms).
2025-05-12 22:45:27.055 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/login - 200 null application/json; charset=utf-8 4416.3374ms
2025-05-12 22:46:36.845 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/register - application/json 160
2025-05-12 22:46:36.849 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-12 22:46:36.850 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-12 22:46:36.852 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:46:36.853 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 22:46:36.855 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:46:36.856 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:46:36.861 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 22:46:36.863 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:36.866 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:36.867 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 22:46:36.869 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:36.871 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 22:46:36.872 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:46:36.874 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:46:36.876 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 22:46:36.878 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-05-12 22:46:36.880 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 22:46:36.888 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000005": started reading request body.
2025-05-12 22:46:36.889 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000005": done reading request body.
2025-05-12 22:46:36.896 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-05-12 22:46:36.897 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:46:36.898 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:46:36.900 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 22:46:36.906 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:46:36.909 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Invalid"
2025-05-12 22:46:36.912 +03:00 [INF] Starting to register user gera - string@gmail.com
2025-05-12 22:46:36.989 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-12 22:46:37.058 +03:00 [DBG] 'MessengerDbContext' generated a temporary value for the property 'UserEntity.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:37.170 +03:00 [DBG] Context 'MessengerDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:37.175 +03:00 [DBG] SaveChanges starting for 'MessengerDbContext'.
2025-05-12 22:46:37.182 +03:00 [DBG] DetectChanges starting for 'MessengerDbContext'.
2025-05-12 22:46:37.209 +03:00 [DBG] DetectChanges completed for 'MessengerDbContext'.
2025-05-12 22:46:37.343 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:46:37.345 +03:00 [DBG] Created DbConnection. (2ms).
2025-05-12 22:46:37.346 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:46:37.350 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:46:37.359 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:46:37.360 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:46:37.366 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-05-12 22:46:37.369 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-12 22:46:37.385 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-12 22:46:37.402 +03:00 [DBG] The foreign key property 'UserEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:46:37.411 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:46:37.413 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 25ms reading results.
2025-05-12 22:46:37.417 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:46:37.419 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-05-12 22:46:37.436 +03:00 [DBG] An entity of type 'UserEntity' tracked by 'MessengerDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:46:37.441 +03:00 [DBG] SaveChanges completed for 'MessengerDbContext' with 1 entities written to the database.
2025-05-12 22:46:37.445 +03:00 [INF] Registered User: gera - string@gmail.com
2025-05-12 22:46:37.448 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 537.9961ms.
2025-05-12 22:46:37.451 +03:00 [INF] Setting HTTP status code 200.
2025-05-12 22:46:37.454 +03:00 [INF] Writing value of type 'Guid' as Json.
2025-05-12 22:46:37.463 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 590.4966ms
2025-05-12 22:46:37.465 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:46:37.466 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:46:37.468 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-12 22:46:37.470 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:46:37.471 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:46:37.473 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/register - 200 null application/json; charset=utf-8 627.6506ms
2025-05-12 22:46:46.356 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/login - application/json 49
2025-05-12 22:46:46.358 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-12 22:46:46.360 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-12 22:46:46.361 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:46:46.362 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 22:46:46.365 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:46:46.367 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:46:46.368 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 22:46:46.370 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:46:46.371 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:46:46.373 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 22:46:46.374 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:46:46.376 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 22:46:46.377 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:46:46.379 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:46:46.381 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-12 22:46:46.383 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-05-12 22:46:46.385 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 22:46:46.386 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000006": started reading request body.
2025-05-12 22:46:46.387 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000006": done reading request body.
2025-05-12 22:46:46.389 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-05-12 22:46:46.389 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:46:46.391 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:46:46.392 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-12 22:46:46.393 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:46:46.394 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-05-12 22:46:46.396 +03:00 [INF] Starting to login User: gera - gera123
2025-05-12 22:46:46.409 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 32.2633ms
2025-05-12 22:46:46.411 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:46:46.414 +03:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Password: Password must contain at least 8 characters Severity: Error
   at Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ValidationBehaivor.cs:line 24
   at API.Controllers.Auth.AuthController.Login(LoginUserDto loginDto) in C:\Users\User\source\repos\DDD_Messanger\API\Controllers\Auth\AuthController.cs:line 38
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-12 22:46:46.444 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:46:46.446 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/login - 500 null text/plain; charset=utf-8 89.3676ms
2025-05-12 22:48:06.508 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/register - application/json 162
2025-05-12 22:48:06.510 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-12 22:48:06.511 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-12 22:48:06.513 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:48:06.514 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 22:48:06.515 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:48:06.516 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:48:06.518 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 22:48:06.519 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:48:06.521 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:48:06.522 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 22:48:06.525 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:48:06.526 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 22:48:06.528 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:48:06.529 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:48:06.531 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 22:48:06.532 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-05-12 22:48:06.534 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 22:48:06.535 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000007": started reading request body.
2025-05-12 22:48:06.537 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000007": done reading request body.
2025-05-12 22:48:06.538 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-05-12 22:48:06.540 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:48:06.541 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:48:06.543 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 22:48:06.544 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:48:06.546 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Invalid"
2025-05-12 22:48:06.548 +03:00 [INF] Starting to register user gera2 - string@gmail.com
2025-05-12 22:48:06.566 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-12 22:48:06.571 +03:00 [DBG] 'MessengerDbContext' generated a temporary value for the property 'UserEntity.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:48:06.573 +03:00 [DBG] Context 'MessengerDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:48:06.575 +03:00 [DBG] SaveChanges starting for 'MessengerDbContext'.
2025-05-12 22:48:06.578 +03:00 [DBG] DetectChanges starting for 'MessengerDbContext'.
2025-05-12 22:48:06.580 +03:00 [DBG] DetectChanges completed for 'MessengerDbContext'.
2025-05-12 22:48:06.583 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:48:06.584 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-12 22:48:06.586 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:06.588 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:06.590 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:48:06.591 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:48:06.592 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:48:06.594 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-12 22:48:06.597 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-12 22:48:06.607 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:06.609 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 7ms reading results.
2025-05-12 22:48:06.612 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:06.613 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-05-12 22:48:06.628 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Persistence.Contexts.MessengerDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (string@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a9f11bbb-2a38-440a-8927-e2ff443e899b
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (string@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a9f11bbb-2a38-440a-8927-e2ff443e899b
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-12 22:48:06.660 +03:00 [ERR] Exception occured during request handling
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (string@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a9f11bbb-2a38-440a-8927-e2ff443e899b
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Persistence.Repositories.UserRepository.AddAsync(UserEntity entity, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Architechture\Persistence\Repositories\UserRepository.cs:line 49
   at Application.UseCases.Users.Auth.RegisterUserHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\UseCases\Users\Auth\RegisterUserHandler.cs:line 31
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Application.Behaviors.ExceptionHandlingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ExceptionHandlingBehavior.cs:line 21
2025-05-12 22:48:06.679 +03:00 [ERR] Request: {"Username":"gera2","Email":"string@gmail.com","Password":"gera1234","FirstName":"string","LastName":"string","DateOfBirth":"2005-05-12T00:00:00.0000000","$type":"RegisterUserCommand"}
2025-05-12 22:48:06.688 +03:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (string@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:a9f11bbb-2a38-440a-8927-e2ff443e899b
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Persistence.Repositories.UserRepository.AddAsync(UserEntity entity, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Architechture\Persistence\Repositories\UserRepository.cs:line 49
   at Application.UseCases.Users.Auth.RegisterUserHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\UseCases\Users\Auth\RegisterUserHandler.cs:line 31
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Application.Behaviors.ExceptionHandlingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ExceptionHandlingBehavior.cs:line 21
2025-05-12 22:48:06.701 +03:00 [ERR] Failure while registering user gera2 - string@gmail.com
2025-05-12 22:48:06.703 +03:00 [ERR] Error: An error occurred while saving the entity changes. See the inner exception for details.
2025-05-12 22:48:06.704 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 156.722ms.
2025-05-12 22:48:06.706 +03:00 [INF] Setting HTTP status code 400.
2025-05-12 22:48:06.707 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-12 22:48:06.708 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 180.4959ms
2025-05-12 22:48:06.710 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:48:06.711 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:48:06.713 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-12 22:48:06.714 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:06.716 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:48:06.717 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/register - 400 null application/json; charset=utf-8 209.5594ms
2025-05-12 22:48:12.888 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/register - application/json 163
2025-05-12 22:48:12.891 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-12 22:48:12.891 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-12 22:48:12.892 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:48:12.894 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 22:48:12.895 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:48:12.896 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:48:12.897 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 22:48:12.898 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:48:12.900 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:48:12.901 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 22:48:12.903 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:48:12.905 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 22:48:12.906 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:48:12.907 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:48:12.909 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 22:48:12.910 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-05-12 22:48:12.912 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 22:48:12.913 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000008": started reading request body.
2025-05-12 22:48:12.915 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000008": done reading request body.
2025-05-12 22:48:12.916 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-05-12 22:48:12.917 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:48:12.919 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:48:12.920 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 22:48:12.921 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 22:48:12.923 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Invalid"
2025-05-12 22:48:12.924 +03:00 [INF] Starting to register user gera2 - string1@gmail.com
2025-05-12 22:48:12.929 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-12 22:48:12.932 +03:00 [DBG] 'MessengerDbContext' generated a temporary value for the property 'UserEntity.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:48:12.934 +03:00 [DBG] Context 'MessengerDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:48:12.935 +03:00 [DBG] SaveChanges starting for 'MessengerDbContext'.
2025-05-12 22:48:12.937 +03:00 [DBG] DetectChanges starting for 'MessengerDbContext'.
2025-05-12 22:48:12.938 +03:00 [DBG] DetectChanges completed for 'MessengerDbContext'.
2025-05-12 22:48:12.939 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:48:12.940 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:48:12.941 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:12.943 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:12.944 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:48:12.945 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:48:12.947 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:48:12.948 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-12 22:48:12.951 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-12 22:48:12.953 +03:00 [DBG] The foreign key property 'UserEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-05-12 22:48:12.955 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:12.956 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-05-12 22:48:12.958 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:12.959 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-05-12 22:48:12.961 +03:00 [DBG] An entity of type 'UserEntity' tracked by 'MessengerDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-05-12 22:48:12.962 +03:00 [DBG] SaveChanges completed for 'MessengerDbContext' with 1 entities written to the database.
2025-05-12 22:48:12.964 +03:00 [INF] Registered User: gera2 - string1@gmail.com
2025-05-12 22:48:12.965 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 40.9779ms.
2025-05-12 22:48:12.967 +03:00 [INF] Setting HTTP status code 200.
2025-05-12 22:48:12.968 +03:00 [INF] Writing value of type 'Guid' as Json.
2025-05-12 22:48:12.969 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 62.6957ms
2025-05-12 22:48:12.970 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 22:48:12.971 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:48:12.972 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-12 22:48:12.974 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:12.975 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:48:12.977 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/register - 200 null application/json; charset=utf-8 88.1999ms
2025-05-12 22:48:22.155 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/login - application/json 51
2025-05-12 22:48:22.157 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-12 22:48:22.158 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-12 22:48:22.160 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:48:22.160 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 22:48:22.161 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 22:48:22.163 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:48:22.164 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 22:48:22.165 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 22:48:22.167 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 22:48:22.169 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 22:48:22.170 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 22:48:22.172 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 22:48:22.173 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:48:22.174 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 22:48:22.176 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-12 22:48:22.177 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-05-12 22:48:22.179 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 22:48:22.180 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000009": started reading request body.
2025-05-12 22:48:22.182 +03:00 [DBG] Connection id "0HNCHHLUC17E9", Request id "0HNCHHLUC17E9:00000009": done reading request body.
2025-05-12 22:48:22.183 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-05-12 22:48:22.184 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:48:22.185 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:48:22.186 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-12 22:48:22.187 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-12 22:48:22.189 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-05-12 22:48:22.190 +03:00 [INF] Starting to login User: gera2 - gera1234
2025-05-12 22:48:22.194 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-12 22:48:22.200 +03:00 [DBG] Creating DbConnection.
2025-05-12 22:48:22.201 +03:00 [DBG] Created DbConnection. (0ms).
2025-05-12 22:48:22.202 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:22.203 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:22.205 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-12 22:48:22.206 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-12 22:48:22.207 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-12 22:48:22.208 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-05-12 22:48:22.211 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-05-12 22:48:22.214 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:22.216 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-05-12 22:48:22.218 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:22.219 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-05-12 22:48:22.222 +03:00 [INF] Login User: gera2 - gera1234
2025-05-12 22:48:22.223 +03:00 [INF] Token generated for user - gera2. Token : Application.Common.Result`1[System.String]
2025-05-12 22:48:22.224 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 34.3525ms.
2025-05-12 22:48:22.226 +03:00 [INF] Setting HTTP status code 200.
2025-05-12 22:48:22.226 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-12 22:48:22.228 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 54.4108ms
2025-05-12 22:48:22.229 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-12 22:48:22.230 +03:00 [DBG] Connection id "0HNCHHLUC17E9" completed keep alive response.
2025-05-12 22:48:22.231 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-12 22:48:22.233 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-12 22:48:22.234 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-12 22:48:22.236 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/login - 200 null application/json; charset=utf-8 80.728ms
2025-05-12 22:50:17.626 +03:00 [DBG] Connection id "0HNCHHLUC17E9" received FIN.
2025-05-12 22:50:17.628 +03:00 [DBG] Connection id "0HNCHHLUC17E9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 22:50:17.629 +03:00 [DBG] Connection id "0HNCHHLUC17E9" disconnecting.
2025-05-12 22:50:17.640 +03:00 [DBG] Connection id "0HNCHHLUC17E9" stopped.
2025-05-12 22:51:53.909 +03:00 [INF] Application is shutting down...
2025-05-12 22:51:53.910 +03:00 [DBG] Hosting stopping
2025-05-12 22:51:53.922 +03:00 [DBG] Hosting stopped
2025-05-12 23:06:34.176 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-12 23:06:34.462 +03:00 [DBG] Hosting starting
2025-05-12 23:06:34.494 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-12 23:06:34.537 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-12 23:06:34.602 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-12 23:06:34.617 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-12 23:06:34.626 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:06:34.638 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-12 23:06:34.642 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:06:34.652 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-12 23:06:34.654 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-12 23:06:34.658 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-12 23:06:34.661 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-12 23:06:34.771 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-12 23:06:34.776 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-12 23:06:34.778 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-12 23:06:34.779 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-12 23:06:34.781 +03:00 [INF] Hosting environment: Development
2025-05-12 23:06:34.783 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-12 23:06:34.785 +03:00 [DBG] Hosting started
2025-05-12 23:07:05.233 +03:00 [DBG] Connection id "0HNCHI28HNV2R" accepted.
2025-05-12 23:07:05.235 +03:00 [DBG] Connection id "0HNCHI28HNV2R" started.
2025-05-12 23:07:06.470 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/ - null null
2025-05-12 23:07:06.476 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-12 23:07:06.500 +03:00 [DBG] No candidates found for the request path '/'
2025-05-12 23:07:06.501 +03:00 [DBG] Request did not match any endpoints
2025-05-12 23:07:06.528 +03:00 [DBG] The request path  does not match the path filter
2025-05-12 23:07:06.571 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:07:06.577 +03:00 [DBG] Connection id "0HNCHI28HNV2R" completed keep alive response.
2025-05-12 23:07:06.581 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/ - 404 0 null 113.2102ms
2025-05-12 23:07:06.588 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7001/, Response status code: 404
2025-05-12 23:07:10.184 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/ - null null
2025-05-12 23:07:10.189 +03:00 [DBG] No candidates found for the request path '/swagger/'
2025-05-12 23:07:10.192 +03:00 [DBG] Request did not match any endpoints
2025-05-12 23:07:10.200 +03:00 [DBG] Connection id "0HNCHI28HNV2R" completed keep alive response.
2025-05-12 23:07:10.204 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/ - 301 0 null 20.5809ms
2025-05-12 23:07:10.227 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/index.html - null null
2025-05-12 23:07:10.235 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-12 23:07:10.237 +03:00 [DBG] Request did not match any endpoints
2025-05-12 23:07:10.460 +03:00 [DBG] Connection id "0HNCHI28HNV2R" completed keep alive response.
2025-05-12 23:07:10.461 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/index.html - 200 null text/html;charset=utf-8 234.3214ms
2025-05-12 23:07:11.105 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/v1/swagger.json - null null
2025-05-12 23:07:11.108 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-12 23:07:11.110 +03:00 [DBG] Request did not match any endpoints
2025-05-12 23:07:11.299 +03:00 [DBG] Connection id "0HNCHI28HNV2R" completed keep alive response.
2025-05-12 23:07:11.300 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.0833ms
2025-05-12 23:07:23.331 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/register - application/json 165
2025-05-12 23:07:23.340 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-12 23:07:23.347 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-12 23:07:23.349 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:07:23.352 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 23:07:23.356 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:07:23.359 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:07:23.386 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 23:07:23.390 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:07:23.392 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:07:23.394 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 23:07:23.396 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:07:23.398 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 23:07:23.401 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:07:23.403 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:07:23.408 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:07:23.411 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-05-12 23:07:23.413 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 23:07:23.427 +03:00 [DBG] Connection id "0HNCHI28HNV2R", Request id "0HNCHI28HNV2R:00000005": started reading request body.
2025-05-12 23:07:23.428 +03:00 [DBG] Connection id "0HNCHI28HNV2R", Request id "0HNCHI28HNV2R:00000005": done reading request body.
2025-05-12 23:07:23.453 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-05-12 23:07:23.454 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:07:23.455 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:07:23.457 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:07:23.465 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:07:23.477 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Valid"
2025-05-12 23:07:23.480 +03:00 [INF] Starting to register user string - string
2025-05-12 23:07:23.558 +03:00 [ERR] Failure while registering user string - string
2025-05-12 23:07:23.559 +03:00 [ERR] Error: Password must be 8-128 characters long, contain at least one uppercase letter, one lowercase letter, one digit, one special character, and no spaces.
'Date Of Birth' must be less than '1/1/2010 12:00:00 AM'.

2025-05-12 23:07:23.564 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 81.8121ms.
2025-05-12 23:07:23.572 +03:00 [INF] Setting HTTP status code 400.
2025-05-12 23:07:23.574 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-12 23:07:23.588 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 185.8518ms
2025-05-12 23:07:23.591 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:07:23.591 +03:00 [DBG] Connection id "0HNCHI28HNV2R" completed keep alive response.
2025-05-12 23:07:23.593 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/register - 400 null application/json; charset=utf-8 261.6634ms
2025-05-12 23:09:19.595 +03:00 [DBG] Connection id "0HNCHI28HNV2R" received FIN.
2025-05-12 23:09:19.597 +03:00 [DBG] Connection id "0HNCHI28HNV2R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:09:19.599 +03:00 [DBG] Connection id "0HNCHI28HNV2R" disconnecting.
2025-05-12 23:09:19.601 +03:00 [DBG] Connection id "0HNCHI28HNV2R" stopped.
2025-05-12 23:09:53.827 +03:00 [INF] Application is shutting down...
2025-05-12 23:09:53.829 +03:00 [DBG] Hosting stopping
2025-05-12 23:09:53.840 +03:00 [DBG] Hosting stopped
2025-05-12 23:09:58.402 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-12 23:09:58.542 +03:00 [DBG] Hosting starting
2025-05-12 23:09:58.561 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-12 23:09:58.578 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-12 23:09:58.587 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-12 23:09:58.601 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-12 23:09:58.605 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:09:58.611 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-12 23:09:58.614 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:09:58.623 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-12 23:09:58.625 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-12 23:09:58.628 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-12 23:09:58.630 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-12 23:09:58.696 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-12 23:09:58.698 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-12 23:09:58.699 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-12 23:09:58.701 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-12 23:09:58.702 +03:00 [INF] Hosting environment: Development
2025-05-12 23:09:58.703 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-12 23:09:58.704 +03:00 [DBG] Hosting started
2025-05-12 23:10:04.419 +03:00 [DBG] Connection id "0HNCHI3TUJC3O" accepted.
2025-05-12 23:10:04.421 +03:00 [DBG] Connection id "0HNCHI3TUJC3O" started.
2025-05-12 23:10:04.464 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/register - application/json 165
2025-05-12 23:10:04.469 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-12 23:10:04.495 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-12 23:10:04.502 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-12 23:10:04.504 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:10:04.524 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 23:10:04.559 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:10:04.562 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:10:04.588 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 23:10:04.592 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:10:04.593 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:10:04.595 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 23:10:04.597 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:10:04.599 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 23:10:04.602 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:10:04.604 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:10:04.611 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:10:04.614 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-05-12 23:10:04.617 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 23:10:04.722 +03:00 [DBG] Connection id "0HNCHI3TUJC3O", Request id "0HNCHI3TUJC3O:00000001": started reading request body.
2025-05-12 23:10:04.725 +03:00 [DBG] Connection id "0HNCHI3TUJC3O", Request id "0HNCHI3TUJC3O:00000001": done reading request body.
2025-05-12 23:10:04.761 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-05-12 23:10:04.763 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:10:04.764 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:10:04.766 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:10:04.777 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:10:04.794 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Valid"
2025-05-12 23:10:04.798 +03:00 [INF] Starting to register user string - string
2025-05-12 23:10:04.887 +03:00 [ERR] Failure while registering user string - string
2025-05-12 23:10:04.888 +03:00 [ERR] Error: Validation failed: 
Password must be 8-128 characters long, contain at least one uppercase letter, one lowercase letter, one digit, one special character, and no spaces.
'Date Of Birth' must be less than '1/1/2010 12:00:00 AM'.

2025-05-12 23:10:04.894 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 93.7226ms.
2025-05-12 23:10:04.905 +03:00 [INF] Setting HTTP status code 400.
2025-05-12 23:10:04.910 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-12 23:10:04.940 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 335.9965ms
2025-05-12 23:10:04.942 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:10:04.944 +03:00 [DBG] Connection id "0HNCHI3TUJC3O" completed keep alive response.
2025-05-12 23:10:04.948 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/register - 400 null application/json; charset=utf-8 485.207ms
2025-05-12 23:11:59.986 +03:00 [DBG] Connection id "0HNCHI3TUJC3O" received FIN.
2025-05-12 23:11:59.988 +03:00 [DBG] Connection id "0HNCHI3TUJC3O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:11:59.990 +03:00 [DBG] Connection id "0HNCHI3TUJC3O" disconnecting.
2025-05-12 23:11:59.993 +03:00 [DBG] Connection id "0HNCHI3TUJC3O" stopped.
2025-05-12 23:13:30.564 +03:00 [INF] Application is shutting down...
2025-05-12 23:13:30.567 +03:00 [DBG] Hosting stopping
2025-05-12 23:13:30.579 +03:00 [DBG] Hosting stopped
2025-05-12 23:13:36.359 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-12 23:13:36.497 +03:00 [DBG] Hosting starting
2025-05-12 23:13:36.512 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-12 23:13:36.533 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-12 23:13:36.549 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-12 23:13:36.562 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-12 23:13:36.567 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:13:36.572 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-12 23:13:36.577 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:13:36.589 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-12 23:13:36.592 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-12 23:13:36.595 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-12 23:13:36.599 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-12 23:13:36.667 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-12 23:13:36.669 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-12 23:13:36.670 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-12 23:13:36.672 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-12 23:13:36.672 +03:00 [INF] Hosting environment: Development
2025-05-12 23:13:36.673 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-12 23:13:36.674 +03:00 [DBG] Hosting started
2025-05-12 23:13:40.011 +03:00 [DBG] Connection id "0HNCHI5U6KTGL" accepted.
2025-05-12 23:13:40.013 +03:00 [DBG] Connection id "0HNCHI5U6KTGL" started.
2025-05-12 23:13:40.056 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/register - application/json 165
2025-05-12 23:13:40.062 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-12 23:13:40.094 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-12 23:13:40.101 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-12 23:13:40.103 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:13:40.124 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 23:13:40.165 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:13:40.168 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:13:40.193 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 23:13:40.196 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:13:40.197 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:13:40.198 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 23:13:40.200 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:13:40.201 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 23:13:40.204 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:13:40.206 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:13:40.214 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:13:40.218 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-05-12 23:13:40.220 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 23:13:40.320 +03:00 [DBG] Connection id "0HNCHI5U6KTGL", Request id "0HNCHI5U6KTGL:00000001": started reading request body.
2025-05-12 23:13:40.321 +03:00 [DBG] Connection id "0HNCHI5U6KTGL", Request id "0HNCHI5U6KTGL:00000001": done reading request body.
2025-05-12 23:13:40.352 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-05-12 23:13:40.354 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:13:40.356 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:13:40.358 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:13:40.373 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:13:40.389 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Valid"
2025-05-12 23:13:40.395 +03:00 [INF] Starting to register user string - string
2025-05-12 23:13:40.493 +03:00 [ERR] Failure while registering user string - string
2025-05-12 23:13:40.495 +03:00 [ERR] Error: Validation failed: 
Password must be 8-128 characters long, contain at least one uppercase letter, one lowercase letter, one digit, one special character, and no spaces.
Email must be a valid email address.
First name must start with a capital letter and contain only letters, hyphens, or apostrophes (max 32 chars).
Last name must start with a capital letter and contain only letters, hyphens, or apostrophes (max 32 chars).
'Date Of Birth' must be less than '1/1/2010 12:00:00 AM'.

2025-05-12 23:13:40.501 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 105.3049ms.
2025-05-12 23:13:40.514 +03:00 [INF] Setting HTTP status code 400.
2025-05-12 23:13:40.519 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-12 23:13:40.551 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 341.722ms
2025-05-12 23:13:40.554 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:13:40.555 +03:00 [DBG] Connection id "0HNCHI5U6KTGL" completed keep alive response.
2025-05-12 23:13:40.558 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/register - 400 null application/json; charset=utf-8 503.4923ms
2025-05-12 23:14:54.587 +03:00 [INF] Application is shutting down...
2025-05-12 23:14:54.589 +03:00 [DBG] Hosting stopping
2025-05-12 23:14:54.600 +03:00 [DBG] Connection id "0HNCHI5U6KTGL" disconnecting.
2025-05-12 23:14:54.603 +03:00 [DBG] Connection id "0HNCHI5U6KTGL" stopped.
2025-05-12 23:14:54.608 +03:00 [DBG] Connection id "0HNCHI5U6KTGL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:14:54.620 +03:00 [DBG] Hosting stopped
2025-05-12 23:15:42.841 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-12 23:15:42.970 +03:00 [DBG] Hosting starting
2025-05-12 23:15:42.986 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-12 23:15:43.000 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-12 23:15:43.010 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-12 23:15:43.022 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-12 23:15:43.026 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:15:43.030 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-12 23:15:43.032 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-12 23:15:43.040 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-12 23:15:43.043 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-12 23:15:43.046 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-12 23:15:43.048 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-12 23:15:43.104 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-12 23:15:43.106 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-12 23:15:43.107 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-12 23:15:43.108 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-12 23:15:43.109 +03:00 [INF] Hosting environment: Development
2025-05-12 23:15:43.110 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-12 23:15:43.111 +03:00 [DBG] Hosting started
2025-05-12 23:15:44.981 +03:00 [DBG] Connection id "0HNCHI73EEM90" accepted.
2025-05-12 23:15:44.983 +03:00 [DBG] Connection id "0HNCHI73EEM90" started.
2025-05-12 23:15:45.020 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/register - application/json 164
2025-05-12 23:15:45.026 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-12 23:15:45.055 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-05-12 23:15:45.062 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-05-12 23:15:45.065 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:15:45.088 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-12 23:15:45.130 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-12 23:15:45.134 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:15:45.166 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-12 23:15:45.170 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-12 23:15:45.172 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-12 23:15:45.175 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-12 23:15:45.178 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-12 23:15:45.181 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-12 23:15:45.187 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:15:45.191 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-12 23:15:45.199 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:15:45.204 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-05-12 23:15:45.207 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-12 23:15:45.326 +03:00 [DBG] Connection id "0HNCHI73EEM90", Request id "0HNCHI73EEM90:00000001": started reading request body.
2025-05-12 23:15:45.328 +03:00 [DBG] Connection id "0HNCHI73EEM90", Request id "0HNCHI73EEM90:00000001": done reading request body.
2025-05-12 23:15:45.361 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-05-12 23:15:45.364 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:15:45.365 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:15:45.367 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-05-12 23:15:45.384 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-05-12 23:15:45.402 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Valid"
2025-05-12 23:15:45.407 +03:00 [INF] Starting to register user gera - string@...
2025-05-12 23:15:45.496 +03:00 [ERR] Failure while registering user gera - string@...
2025-05-12 23:15:45.497 +03:00 [ERR] Error: Validation failed: 
Password must be 8-128 characters long, contain at least one uppercase letter, one lowercase letter, one digit, one special character, and no spaces.
First name must start with a capital letter and contain only letters, hyphens, or apostrophes (max 32 chars).
Last name must start with a capital letter and contain only letters, hyphens, or apostrophes (max 32 chars).
'Date Of Birth' must be less than '1/1/2010 12:00:00 AM'.

2025-05-12 23:15:45.504 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 94.8789ms.
2025-05-12 23:15:45.517 +03:00 [INF] Setting HTTP status code 400.
2025-05-12 23:15:45.521 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-12 23:15:45.553 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 362.8086ms
2025-05-12 23:15:45.554 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-05-12 23:15:45.556 +03:00 [DBG] Connection id "0HNCHI73EEM90" completed keep alive response.
2025-05-12 23:15:45.560 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/register - 400 null application/json; charset=utf-8 540.529ms
2025-05-12 23:17:37.908 +03:00 [INF] Application is shutting down...
2025-05-12 23:17:37.911 +03:00 [DBG] Hosting stopping
2025-05-12 23:17:37.923 +03:00 [DBG] Connection id "0HNCHI73EEM90" disconnecting.
2025-05-12 23:17:37.928 +03:00 [DBG] Connection id "0HNCHI73EEM90" stopped.
2025-05-12 23:17:37.933 +03:00 [DBG] Connection id "0HNCHI73EEM90" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-12 23:17:37.940 +03:00 [DBG] Hosting stopped
