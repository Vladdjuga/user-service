2025-04-23 21:11:47.460 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 21:11:47.583 +03:00 [DBG] Hosting starting
2025-04-23 21:11:47.600 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 21:11:47.617 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 21:11:47.645 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 21:11:47.656 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 21:11:47.661 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:11:47.665 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 21:11:47.667 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:11:47.677 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 21:11:47.679 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 21:11:47.682 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 21:11:47.684 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 21:11:47.735 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 21:11:47.736 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 21:11:47.737 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 21:11:47.738 +03:00 [INF] Hosting environment: Development
2025-04-23 21:11:47.739 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 21:11:47.740 +03:00 [DBG] Hosting started
2025-04-23 21:11:47.895 +03:00 [DBG] Connection id "0HNC2I9839IAJ" received FIN.
2025-04-23 21:11:47.909 +03:00 [DBG] Connection id "0HNC2I9839IAJ" accepted.
2025-04-23 21:11:47.911 +03:00 [DBG] Connection id "0HNC2I9839IAJ" started.
2025-04-23 21:11:47.922 +03:00 [DBG] Connection id "0HNC2I9839IAJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:11:47.931 +03:00 [DBG] Connection id "0HNC2I9839IAJ" disconnecting.
2025-04-23 21:11:47.939 +03:00 [DBG] Connection id "0HNC2I9839IAJ" stopped.
2025-04-23 21:11:48.121 +03:00 [DBG] Connection id "0HNC2I9839IAK" accepted.
2025-04-23 21:11:48.123 +03:00 [DBG] Connection id "0HNC2I9839IAK" started.
2025-04-23 21:11:48.313 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger - null null
2025-04-23 21:11:48.318 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 21:11:48.354 +03:00 [DBG] No candidates found for the request path '/swagger'
2025-04-23 21:11:48.358 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:11:48.416 +03:00 [DBG] Connection id "0HNC2I9839IAK" completed keep alive response.
2025-04-23 21:11:48.421 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger - 301 0 null 110.5537ms
2025-04-23 21:11:48.434 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 21:11:48.436 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 21:11:48.438 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:11:48.663 +03:00 [DBG] Connection id "0HNC2I9839IAK" completed keep alive response.
2025-04-23 21:11:48.665 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 230.6985ms
2025-04-23 21:11:48.935 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/favicon-32x32.png - null null
2025-04-23 21:11:48.935 +03:00 [DBG] Connection id "0HNC2I9839IAK" received FIN.
2025-04-23 21:11:48.938 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-04-23 21:11:48.939 +03:00 [DBG] Connection id "0HNC2I9839IAK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:11:48.940 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:11:48.943 +03:00 [DBG] Connection id "0HNC2I9839IAK" disconnecting.
2025-04-23 21:11:48.955 +03:00 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2025-04-23 21:11:48.978 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-23 21:11:48.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/favicon-32x32.png - 499 628 image/png 43.7104ms
2025-04-23 21:11:48.987 +03:00 [DBG] Connection id "0HNC2I9839IAK" stopped.
2025-04-23 21:11:49.046 +03:00 [DBG] Connection id "0HNC2I9839IAL" accepted.
2025-04-23 21:11:49.048 +03:00 [DBG] Connection id "0HNC2I9839IAL" started.
2025-04-23 21:11:49.051 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 21:11:49.053 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 21:11:49.054 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:11:49.211 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:11:49.213 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.739ms
2025-04-23 21:12:10.713 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - null null
2025-04-23 21:12:10.721 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:12:10.728 +03:00 [DBG] Endpoint 'API.Controllers.Test.TokenController.GetToken (API)' with route pattern 'api/Token/user/{userId}' is valid for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:12:10.730 +03:00 [DBG] Request matched endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:12:10.733 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:12:10.735 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 21:12:10.779 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:12:10.782 +03:00 [INF] Executing endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:12:10.812 +03:00 [INF] Route matched with {action = "GetToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetToken(System.Guid) on controller API.Controllers.Test.TokenController (API).
2025-04-23 21:12:10.815 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:12:10.816 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:12:10.817 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:12:10.819 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:12:10.820 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:12:10.824 +03:00 [DBG] Executing controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:12:10.968 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 21:12:11.008 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 21:12:11.624 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 21:12:11.799 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 21:12:11.941 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:12:11.943 +03:00 [DBG] Executed controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:12:11.948 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:12:11.951 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2025-04-23 21:12:11.953 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:12:11.954 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:12:11.955 +03:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:12:11.957 +03:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2025-04-23 21:12:11.970 +03:00 [INF] Executing action method API.Controllers.Test.TokenController.GetToken (API) - Validation state: "Valid"
2025-04-23 21:12:12.078 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(e => EF.Property<Guid>(e, "Id") == __id_0)'
2025-04-23 21:12:12.533 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:12:12.596 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:12:12.628 +03:00 [DBG] Created DbConnection. (28ms).
2025-04-23 21:12:12.633 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:12:13.657 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:12:13.663 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:12:13.673 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-23 21:12:13.683 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-04-23 21:12:13.695 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:12:13.757 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:12:13.801 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:12:13.811 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 43ms reading results.
2025-04-23 21:12:13.817 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:12:13.827 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (9ms).
2025-04-23 21:12:13.869 +03:00 [INF] Executed action method API.Controllers.Test.TokenController.GetToken (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1893.9414ms.
2025-04-23 21:12:13.878 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-23 21:12:13.883 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-23 21:12:13.887 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-23 21:12:13.888 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-23 21:12:13.897 +03:00 [INF] Executed action API.Controllers.Test.TokenController.GetToken (API) in 3070.984ms
2025-04-23 21:12:13.900 +03:00 [INF] Executed endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:12:13.906 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:12:13.913 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:12:13.921 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:12:13.925 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-23 21:12:13.928 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - 200 null text/plain; charset=utf-8 3215.4978ms
2025-04-23 21:13:16.819 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:13:16.822 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:13:16.824 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:13:16.825 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:16.826 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:16.880 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:16.882 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:16.887 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:16.888 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:16.894 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:16.896 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:16.898 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:16.899 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:16.901 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:16.902 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:16.903 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:16.968 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:17.101 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:17.103 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:17.104 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:17.106 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:17.108 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:17.110 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:17.115 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:17.117 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:17.120 +03:00 [INF] Starting to get user info for hannah_young
2025-04-23 21:13:17.172 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(o => o.Username.Equals(__userName_0))'
2025-04-23 21:13:17.203 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:13:17.211 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:17.213 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-23 21:13:17.214 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:17.217 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:17.218 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:17.219 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:17.222 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-04-23 21:13:17.224 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:17.231 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:17.234 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:17.235 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-04-23 21:13:17.237 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:17.238 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:17.255 +03:00 [INF] User hannah_young found
2025-04-23 21:13:17.257 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 138.6105ms.
2025-04-23 21:13:17.259 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:17.268 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:17.295 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 391.2813ms
2025-04-23 21:13:17.296 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:17.297 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:17.298 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:17.299 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:17.301 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:17.302 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 200 null application/json; charset=utf-8 482.8666ms
2025-04-23 21:13:25.976 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - null null
2025-04-23 21:13:25.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:13:25.980 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:13:25.982 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:25.983 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:25.986 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:25.987 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:25.990 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:25.991 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:25.992 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:25.994 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:25.995 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:25.997 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:25.998 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:25.999 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:26.001 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:26.016 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:26.018 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:26.020 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:26.021 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:26.022 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:26.024 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:26.025 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:26.026 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:26.027 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:26.028 +03:00 [INF] Starting to get user info for bob_jones
2025-04-23 21:13:26.035 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:26.036 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:26.037 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:26.039 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:26.040 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:26.041 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:26.043 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:26.044 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:26.046 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:26.049 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:26.050 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-04-23 21:13:26.052 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:26.053 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:26.055 +03:00 [INF] User bob_jones found
2025-04-23 21:13:26.057 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 28.5931ms.
2025-04-23 21:13:26.058 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:26.059 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:26.061 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 60.105ms
2025-04-23 21:13:26.062 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:26.063 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:26.064 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:26.066 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:26.068 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:26.069 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - 200 null application/json; charset=utf-8 93.251ms
2025-04-23 21:13:30.433 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - null null
2025-04-23 21:13:30.436 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:13:30.438 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:13:30.440 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:30.441 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:30.443 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:30.444 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:30.447 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:30.449 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:30.451 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:30.454 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:30.456 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:30.458 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:30.460 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:30.463 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:30.465 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:30.467 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:30.470 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:30.472 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:30.473 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:30.475 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:30.476 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:30.477 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:30.480 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:30.481 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:30.482 +03:00 [INF] Starting to get user info for alice_williams
2025-04-23 21:13:30.485 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:30.486 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:30.487 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:30.488 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:30.489 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:30.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:30.492 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:30.494 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:30.496 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:30.498 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:30.499 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:30.501 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:30.502 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (0ms).
2025-04-23 21:13:30.503 +03:00 [INF] User alice_williams found
2025-04-23 21:13:30.504 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 22.0847ms.
2025-04-23 21:13:30.506 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:30.507 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:30.509 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 44.2883ms
2025-04-23 21:13:30.510 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:30.511 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:30.512 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:30.513 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:30.515 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:30.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - 200 null application/json; charset=utf-8 83.0526ms
2025-04-23 21:13:34.586 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - null null
2025-04-23 21:13:34.588 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:13:34.590 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:13:34.592 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:34.593 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:34.594 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:34.595 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:34.596 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:34.597 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:34.598 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:34.599 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:34.600 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:34.602 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:34.603 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:34.604 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:34.606 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:34.608 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:34.611 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:34.612 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:34.613 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:34.615 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:34.616 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:34.617 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:34.618 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:34.619 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:34.620 +03:00 [INF] Starting to get user info for vlad
2025-04-23 21:13:34.622 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:34.623 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:34.624 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:34.625 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:34.627 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:34.628 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:34.629 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:34.630 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:34.632 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:34.634 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:34.636 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:34.638 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:34.639 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:34.641 +03:00 [INF] User vlad found
2025-04-23 21:13:34.643 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 22.3901ms.
2025-04-23 21:13:34.644 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:34.645 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:34.646 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 40.1385ms
2025-04-23 21:13:34.647 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:34.648 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:34.650 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:34.651 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:34.652 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:34.654 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - 200 null application/json; charset=utf-8 68.0281ms
2025-04-23 21:13:39.454 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - null null
2025-04-23 21:13:39.456 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:13:39.458 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:13:39.460 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:39.462 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:39.463 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:39.464 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:39.465 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:39.466 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:39.467 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:39.469 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:39.470 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:39.471 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:39.473 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:39.474 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:39.476 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:39.478 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:39.480 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:39.481 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:39.482 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:39.483 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:39.484 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:39.485 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:39.486 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:39.487 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:39.488 +03:00 [INF] Starting to get user info for evan_clark
2025-04-23 21:13:39.490 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:39.491 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-23 21:13:39.492 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:39.493 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:39.494 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:39.495 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:39.496 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:39.498 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:39.500 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:39.502 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:39.504 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:39.505 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:39.507 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:39.509 +03:00 [INF] User evan_clark found
2025-04-23 21:13:39.510 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.5337ms.
2025-04-23 21:13:39.511 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:39.512 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:39.513 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 36.9456ms
2025-04-23 21:13:39.514 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:39.515 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:39.516 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:39.517 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:39.518 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:39.520 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - 200 null application/json; charset=utf-8 66.2832ms
2025-04-23 21:13:43.093 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/john_doe - null null
2025-04-23 21:13:43.095 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/john_doe'
2025-04-23 21:13:43.096 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/john_doe'
2025-04-23 21:13:43.098 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:43.099 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:43.100 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:43.101 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:43.102 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:43.103 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:43.103 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:43.105 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:43.106 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:43.108 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:43.109 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:43.110 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:43.112 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:43.114 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:43.116 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:43.117 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:43.118 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:43.119 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:43.120 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:43.121 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:43.122 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:43.124 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:43.125 +03:00 [INF] Starting to get user info for john_doe
2025-04-23 21:13:43.126 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:43.127 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:43.128 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:43.130 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:43.131 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:43.132 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:43.134 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:43.135 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:43.137 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:43.139 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:43.140 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:43.142 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:43.143 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:43.145 +03:00 [INF] User john_doe found
2025-04-23 21:13:43.146 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.0198ms.
2025-04-23 21:13:43.148 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:43.149 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:43.150 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 37.9847ms
2025-04-23 21:13:43.151 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:43.152 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:43.153 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:43.154 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:43.156 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:43.157 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/john_doe - 200 null application/json; charset=utf-8 64.5693ms
2025-04-23 21:13:47.202 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/charlie_brown - null null
2025-04-23 21:13:47.205 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/charlie_brown'
2025-04-23 21:13:47.206 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/charlie_brown'
2025-04-23 21:13:47.208 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:47.209 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:47.210 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:47.210 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:47.212 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:47.212 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:47.213 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:47.215 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:47.216 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:47.217 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:47.219 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:47.220 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:47.221 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:47.224 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:47.226 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:47.227 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:47.229 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:47.230 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:47.231 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:47.232 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:47.233 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:47.235 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:47.236 +03:00 [INF] Starting to get user info for charlie_brown
2025-04-23 21:13:47.237 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:47.238 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:47.238 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:47.240 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:47.241 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:47.243 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:47.244 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:47.245 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:47.247 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:47.249 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:47.250 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:47.252 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:47.253 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:47.254 +03:00 [INF] User charlie_brown found
2025-04-23 21:13:47.255 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 19.0474ms.
2025-04-23 21:13:47.257 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:47.258 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:47.259 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 37.9141ms
2025-04-23 21:13:47.260 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:47.261 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:47.262 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:47.263 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:47.265 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:47.266 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/charlie_brown - 200 null application/json; charset=utf-8 63.8325ms
2025-04-23 21:13:50.459 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/jane_smith - null null
2025-04-23 21:13:50.461 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/jane_smith'
2025-04-23 21:13:50.463 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/jane_smith'
2025-04-23 21:13:50.464 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:50.465 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:50.466 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:50.466 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:50.467 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:50.468 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:50.469 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:50.471 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:50.472 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:50.473 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:50.475 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:50.476 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:50.477 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:50.479 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:50.481 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:50.482 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:50.483 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:50.485 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:50.486 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:50.487 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:50.488 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:50.489 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:50.490 +03:00 [INF] Starting to get user info for jane_smith
2025-04-23 21:13:50.492 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:50.493 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:50.493 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:50.495 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:50.496 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:50.497 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:13:50.498 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:50.499 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:50.502 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:50.504 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:50.505 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:50.507 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:50.509 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:50.510 +03:00 [INF] User jane_smith found
2025-04-23 21:13:50.511 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.1327ms.
2025-04-23 21:13:50.513 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:50.513 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:50.514 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 36.8413ms
2025-04-23 21:13:50.516 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:50.517 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:50.518 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:50.519 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:50.520 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-23 21:13:50.521 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/jane_smith - 200 null application/json; charset=utf-8 62.2424ms
2025-04-23 21:13:53.592 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/fay_lee - null null
2025-04-23 21:13:53.594 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/fay_lee'
2025-04-23 21:13:53.595 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/fay_lee'
2025-04-23 21:13:53.597 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:53.598 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:53.598 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:53.599 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:53.600 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:53.601 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:53.602 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:53.604 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:53.605 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:53.607 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:53.609 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:53.610 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:53.611 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:53.613 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:53.615 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:53.616 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:53.617 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:53.619 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:53.620 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:53.620 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:53.621 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:53.623 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:53.624 +03:00 [INF] Starting to get user info for fay_lee
2025-04-23 21:13:53.626 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:53.627 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:53.627 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:53.629 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:53.630 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:53.631 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:53.632 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:53.633 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:53.636 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:53.638 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:53.639 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:53.641 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:53.642 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:53.644 +03:00 [INF] User fay_lee found
2025-04-23 21:13:53.645 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 20.4484ms.
2025-04-23 21:13:53.646 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:53.648 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:53.649 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 37.939ms
2025-04-23 21:13:53.651 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:53.652 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:53.653 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:53.654 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:53.656 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:53.657 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/fay_lee - 200 null application/json; charset=utf-8 65.037ms
2025-04-23 21:13:56.736 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/george_hall - null null
2025-04-23 21:13:56.738 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/george_hall'
2025-04-23 21:13:56.739 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/george_hall'
2025-04-23 21:13:56.741 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:56.742 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:56.744 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:56.744 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:56.746 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:56.746 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:56.748 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:56.749 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:56.751 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:56.752 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:56.754 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:56.755 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:56.757 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:56.760 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:56.761 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:56.763 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:56.764 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:56.765 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:56.766 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:56.768 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:56.769 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:56.770 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:56.771 +03:00 [INF] Starting to get user info for george_hall
2025-04-23 21:13:56.772 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:56.773 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:56.775 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:56.776 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:56.777 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:56.779 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:13:56.780 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:56.782 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:56.784 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:56.787 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:56.788 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:56.790 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:56.792 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:56.793 +03:00 [INF] User george_hall found
2025-04-23 21:13:56.794 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 23.2299ms.
2025-04-23 21:13:56.796 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:56.797 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:56.798 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 41.6719ms
2025-04-23 21:13:56.800 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:56.801 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:56.803 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:56.804 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:56.806 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:56.808 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/george_hall - 200 null application/json; charset=utf-8 71.654ms
2025-04-23 21:13:59.645 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - null null
2025-04-23 21:13:59.647 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:13:59.647 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:13:59.649 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:59.649 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:13:59.650 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:13:59.651 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:13:59.652 +03:00 [DBG] Authorization was successful.
2025-04-23 21:13:59.653 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:59.653 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:13:59.655 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:13:59.657 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:13:59.659 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:13:59.660 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:13:59.661 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:13:59.663 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:59.665 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:13:59.666 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:13:59.667 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:13:59.669 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:13:59.670 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:59.671 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:13:59.672 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:13:59.674 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:13:59.675 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:13:59.677 +03:00 [INF] Starting to get user info for diana_martin
2025-04-23 21:13:59.678 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:13:59.679 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:13:59.680 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:59.681 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:59.682 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:13:59.683 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:13:59.685 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:13:59.686 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:59.688 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:13:59.691 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:59.692 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:13:59.694 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:59.695 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:13:59.697 +03:00 [INF] User diana_martin found
2025-04-23 21:13:59.698 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.0124ms.
2025-04-23 21:13:59.699 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:13:59.700 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:13:59.701 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 38.6047ms
2025-04-23 21:13:59.703 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:13:59.704 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:13:59.705 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:13:59.707 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:13:59.708 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:13:59.710 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - 200 null application/json; charset=utf-8 65.1275ms
2025-04-23 21:14:03.145 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - null null
2025-04-23 21:14:03.147 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:14:03.148 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:14:03.150 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:03.151 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:14:03.152 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:14:03.153 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:14:03.154 +03:00 [DBG] Authorization was successful.
2025-04-23 21:14:03.155 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:03.156 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:14:03.158 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:14:03.160 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:14:03.162 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:14:03.164 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:14:03.166 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:14:03.167 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:03.169 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:14:03.171 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:03.172 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:14:03.174 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:14:03.175 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:03.176 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:03.178 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:14:03.179 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:14:03.180 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:14:03.181 +03:00 [INF] Starting to get user info for evan_clark
2025-04-23 21:14:03.183 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:14:03.184 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:14:03.184 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:03.186 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:03.187 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:14:03.188 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:14:03.189 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:14:03.191 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:03.193 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:03.195 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:03.195 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:14:03.196 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:03.197 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (0ms).
2025-04-23 21:14:03.198 +03:00 [INF] User evan_clark found
2025-04-23 21:14:03.199 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 17.7351ms.
2025-04-23 21:14:03.200 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:14:03.201 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:14:03.202 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 34.7796ms
2025-04-23 21:14:03.204 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:03.205 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:14:03.206 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:14:03.208 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:03.209 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:14:03.211 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - 200 null application/json; charset=utf-8 65.4026ms
2025-04-23 21:14:07.974 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - null null
2025-04-23 21:14:07.976 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:14:07.978 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:14:07.979 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:07.980 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:14:07.981 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:14:07.982 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:14:07.983 +03:00 [DBG] Authorization was successful.
2025-04-23 21:14:07.984 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:07.985 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:14:07.987 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:14:07.989 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:14:07.990 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:14:07.992 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:14:07.993 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:14:07.995 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:07.997 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:14:07.998 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:08.000 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:14:08.002 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:14:08.003 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:08.005 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:08.006 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:14:08.008 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:14:08.009 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:14:08.010 +03:00 [INF] Starting to get user info for vlad
2025-04-23 21:14:08.011 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:14:08.012 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:14:08.013 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:08.014 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:08.016 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:14:08.017 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:14:08.018 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:14:08.019 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:08.021 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:08.024 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:08.025 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:14:08.026 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:08.027 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:14:08.028 +03:00 [INF] User vlad found
2025-04-23 21:14:08.029 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 18.7476ms.
2025-04-23 21:14:08.030 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:14:08.031 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:14:08.032 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 37.6062ms
2025-04-23 21:14:08.034 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:08.034 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:14:08.036 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:14:08.037 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:08.038 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:14:08.040 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - 200 null application/json; charset=utf-8 66.0057ms
2025-04-23 21:14:12.530 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - null null
2025-04-23 21:14:12.532 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:14:12.533 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:14:12.534 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:12.535 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:14:12.536 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:14:12.537 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:14:12.538 +03:00 [DBG] Authorization was successful.
2025-04-23 21:14:12.538 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:12.540 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:14:12.542 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:14:12.543 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:14:12.545 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:14:12.546 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:14:12.547 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:14:12.549 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:12.550 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:14:12.552 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:12.553 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:14:12.555 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:14:12.557 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:12.558 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:12.559 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:14:12.560 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:14:12.561 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:14:12.562 +03:00 [INF] Starting to get user info for alice_williams
2025-04-23 21:14:12.563 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:14:12.564 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:14:12.565 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:12.566 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:12.567 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:14:12.568 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:14:12.569 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:14:12.571 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:12.573 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:12.576 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:12.577 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:14:12.579 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:12.580 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:14:12.581 +03:00 [INF] User alice_williams found
2025-04-23 21:14:12.582 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 19.947ms.
2025-04-23 21:14:12.584 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:14:12.584 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:14:12.585 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 36.7485ms
2025-04-23 21:14:12.587 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:12.588 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:14:12.589 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:14:12.591 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:12.592 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:14:12.593 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - 200 null application/json; charset=utf-8 63.758ms
2025-04-23 21:14:15.649 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - null null
2025-04-23 21:14:15.652 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:14:15.653 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:14:15.655 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:15.655 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:14:15.657 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:14:15.657 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:14:15.659 +03:00 [DBG] Authorization was successful.
2025-04-23 21:14:15.659 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:15.661 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:14:15.663 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:14:15.664 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:14:15.666 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:14:15.668 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:14:15.669 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:14:15.671 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:15.673 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:14:15.675 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:15.676 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:14:15.677 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:14:15.679 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:15.681 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:15.682 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:14:15.683 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:14:15.684 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:14:15.685 +03:00 [INF] Starting to get user info for bob_jones
2025-04-23 21:14:15.686 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:14:15.687 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:14:15.688 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:15.690 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:15.691 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:14:15.693 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:14:15.694 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:14:15.696 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:15.698 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:15.700 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:15.702 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:14:15.703 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:15.704 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:14:15.705 +03:00 [INF] User bob_jones found
2025-04-23 21:14:15.706 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.0172ms.
2025-04-23 21:14:15.708 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:14:15.709 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:14:15.710 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 39.1771ms
2025-04-23 21:14:15.711 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:15.713 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:14:15.714 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:14:15.715 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:15.716 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:14:15.718 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - 200 null application/json; charset=utf-8 68.5031ms
2025-04-23 21:14:19.042 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:14:19.044 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:14:19.045 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:14:19.047 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:19.048 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:14:19.049 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:14:19.050 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:14:19.051 +03:00 [DBG] Authorization was successful.
2025-04-23 21:14:19.052 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:19.053 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:14:19.055 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:14:19.056 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:14:19.058 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:14:19.059 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:14:19.060 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:14:19.062 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:19.064 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:14:19.066 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:14:19.067 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:14:19.069 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:14:19.070 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:19.071 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:14:19.073 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:14:19.075 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:14:19.076 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:14:19.077 +03:00 [INF] Starting to get user info for hannah_young
2025-04-23 21:14:19.078 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:14:19.079 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:14:19.080 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:19.081 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:19.083 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:14:19.084 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:14:19.085 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:14:19.086 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:19.088 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:14:19.091 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:19.093 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-04-23 21:14:19.094 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:19.096 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:14:19.097 +03:00 [INF] User hannah_young found
2025-04-23 21:14:19.098 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 20.922ms.
2025-04-23 21:14:19.100 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:14:19.101 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:14:19.102 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 40.2803ms
2025-04-23 21:14:19.103 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:14:19.105 +03:00 [DBG] Connection id "0HNC2I9839IAL" completed keep alive response.
2025-04-23 21:14:19.106 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:14:19.107 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:14:19.109 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:14:19.110 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 200 null application/json; charset=utf-8 68.2175ms
2025-04-23 21:16:14.150 +03:00 [DBG] Connection id "0HNC2I9839IAL" received FIN.
2025-04-23 21:16:14.152 +03:00 [DBG] Connection id "0HNC2I9839IAL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:16:14.153 +03:00 [DBG] Connection id "0HNC2I9839IAL" disconnecting.
2025-04-23 21:16:14.165 +03:00 [DBG] Connection id "0HNC2I9839IAL" stopped.
2025-04-23 21:17:40.343 +03:00 [INF] Application is shutting down...
2025-04-23 21:17:40.344 +03:00 [DBG] Hosting stopping
2025-04-23 21:17:40.353 +03:00 [DBG] Hosting stopped
2025-04-23 21:17:54.180 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 21:17:54.312 +03:00 [DBG] Hosting starting
2025-04-23 21:17:54.328 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 21:17:54.344 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 21:17:54.352 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 21:17:54.363 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 21:17:54.368 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:17:54.374 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 21:17:54.377 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:17:54.384 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 21:17:54.386 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 21:17:54.388 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 21:17:54.390 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 21:17:54.441 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 21:17:54.442 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 21:17:54.443 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 21:17:54.444 +03:00 [INF] Hosting environment: Development
2025-04-23 21:17:54.445 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 21:17:54.446 +03:00 [DBG] Hosting started
2025-04-23 21:17:54.581 +03:00 [DBG] Connection id "0HNC2ICLC96FJ" received FIN.
2025-04-23 21:17:54.591 +03:00 [DBG] Connection id "0HNC2ICLC96FJ" accepted.
2025-04-23 21:17:54.594 +03:00 [DBG] Connection id "0HNC2ICLC96FJ" started.
2025-04-23 21:17:54.605 +03:00 [DBG] Connection id "0HNC2ICLC96FJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:17:54.611 +03:00 [DBG] Connection id "0HNC2ICLC96FJ" disconnecting.
2025-04-23 21:17:54.619 +03:00 [DBG] Connection id "0HNC2ICLC96FJ" stopped.
2025-04-23 21:17:54.721 +03:00 [DBG] Connection id "0HNC2ICLC96FK" accepted.
2025-04-23 21:17:54.723 +03:00 [DBG] Connection id "0HNC2ICLC96FK" started.
2025-04-23 21:17:54.925 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 21:17:54.930 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 21:17:54.951 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 21:17:54.952 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:17:55.154 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:17:55.158 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 234.2135ms
2025-04-23 21:17:55.349 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 21:17:55.351 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 21:17:55.353 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:17:55.487 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:17:55.489 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.9389ms
2025-04-23 21:18:29.846 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:18:29.854 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:18:29.867 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:18:29.872 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:18:29.875 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:18:29.877 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 21:18:29.927 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-23 21:18:29.939 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-23 21:18:29.944 +03:00 [DBG] Policy authentication schemes  did not succeed
2025-04-23 21:18:29.947 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-23 21:18:29.954 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-23 21:18:29.956 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:18:29.957 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 401 0 null 110.3555ms
2025-04-23 21:18:37.224 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - null null
2025-04-23 21:18:37.228 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:18:37.229 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:18:37.231 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:18:37.232 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:18:37.236 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-23 21:18:37.238 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-23 21:18:37.240 +03:00 [DBG] Policy authentication schemes  did not succeed
2025-04-23 21:18:37.241 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-23 21:18:37.242 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-23 21:18:37.244 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:18:37.245 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - 401 0 null 21.1569ms
2025-04-23 21:18:41.227 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - null null
2025-04-23 21:18:41.229 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:18:41.231 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:18:41.232 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:18:41.233 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:18:41.234 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-23 21:18:41.238 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-23 21:18:41.241 +03:00 [DBG] Policy authentication schemes  did not succeed
2025-04-23 21:18:41.242 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-23 21:18:41.243 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-23 21:18:41.244 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:18:41.245 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - 401 0 null 17.7844ms
2025-04-23 21:18:46.191 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - null null
2025-04-23 21:18:46.194 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:18:46.195 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:18:46.196 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:18:46.197 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:18:46.198 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-23 21:18:46.201 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-23 21:18:46.202 +03:00 [DBG] Policy authentication schemes  did not succeed
2025-04-23 21:18:46.202 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-23 21:18:46.203 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-23 21:18:46.204 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:18:46.205 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - 401 0 null 14.4832ms
2025-04-23 21:18:49.232 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - null null
2025-04-23 21:18:49.234 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:18:49.235 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:18:49.236 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:18:49.237 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:18:49.238 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-23 21:18:49.240 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-23 21:18:49.241 +03:00 [DBG] Policy authentication schemes  did not succeed
2025-04-23 21:18:49.243 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-23 21:18:49.244 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-23 21:18:49.246 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:18:49.248 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - 401 0 null 15.6549ms
2025-04-23 21:18:53.605 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - null null
2025-04-23 21:18:53.609 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:18:53.611 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:18:53.612 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:18:53.614 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:18:53.615 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-04-23 21:18:53.618 +03:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-04-23 21:18:53.619 +03:00 [DBG] Policy authentication schemes  did not succeed
2025-04-23 21:18:53.620 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-04-23 21:18:53.621 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-04-23 21:18:53.622 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:18:53.623 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - 401 0 null 17.9508ms
2025-04-23 21:19:12.903 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - null null
2025-04-23 21:19:12.905 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:19:12.906 +03:00 [DBG] Endpoint 'API.Controllers.Test.TokenController.GetToken (API)' with route pattern 'api/Token/user/{userId}' is valid for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:19:12.908 +03:00 [DBG] Request matched endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:19:12.909 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:12.910 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:19:12.912 +03:00 [INF] Executing endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:19:12.937 +03:00 [INF] Route matched with {action = "GetToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetToken(System.Guid) on controller API.Controllers.Test.TokenController (API).
2025-04-23 21:19:12.940 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:12.941 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:12.943 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:12.944 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:12.945 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:12.948 +03:00 [DBG] Executing controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:19:13.067 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 21:19:13.105 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 21:19:13.709 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 21:19:13.882 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 21:19:14.023 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:14.026 +03:00 [DBG] Executed controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:19:14.031 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:19:14.034 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2025-04-23 21:19:14.036 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:19:14.037 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:19:14.038 +03:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:19:14.040 +03:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2025-04-23 21:19:14.052 +03:00 [INF] Executing action method API.Controllers.Test.TokenController.GetToken (API) - Validation state: "Valid"
2025-04-23 21:19:14.141 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(e => EF.Property<Guid>(e, "Id") == __id_0)'
2025-04-23 21:19:14.590 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:19:14.651 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:19:14.681 +03:00 [DBG] Created DbConnection. (26ms).
2025-04-23 21:19:14.686 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:19:14.893 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:19:14.900 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:19:14.909 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-23 21:19:14.922 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2025-04-23 21:19:14.935 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:19:15.001 +03:00 [INF] Executed DbCommand (70ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:19:15.043 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:19:15.054 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 41ms reading results.
2025-04-23 21:19:15.061 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:19:15.071 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (10ms).
2025-04-23 21:19:15.109 +03:00 [INF] Executed action method API.Controllers.Test.TokenController.GetToken (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1051.1712ms.
2025-04-23 21:19:15.118 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-23 21:19:15.124 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-23 21:19:15.126 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-23 21:19:15.129 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-23 21:19:15.137 +03:00 [INF] Executed action API.Controllers.Test.TokenController.GetToken (API) in 2185.0156ms
2025-04-23 21:19:15.139 +03:00 [INF] Executed endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:19:15.145 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:15.150 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:15.157 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:19:15.162 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-04-23 21:19:15.165 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - 200 null text/plain; charset=utf-8 2262.14ms
2025-04-23 21:19:24.892 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - null null
2025-04-23 21:19:24.895 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:19:24.897 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:19:24.899 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:24.900 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:24.938 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:24.940 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:24.941 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:24.942 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:24.948 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:24.949 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:24.951 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:24.952 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:24.954 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:24.956 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:24.957 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:25.038 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:25.162 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:25.164 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:25.166 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:25.167 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:25.168 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:25.169 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:25.173 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:25.175 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:25.178 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:25.180 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 3.4175ms.
2025-04-23 21:19:25.182 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:25.185 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:25.193 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 236.111ms
2025-04-23 21:19:25.195 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:25.196 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:25.198 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:25.199 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - 400 null application/json; charset=utf-8 307.0248ms
2025-04-23 21:19:31.709 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:19:31.711 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:19:31.713 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:19:31.714 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:31.715 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:31.717 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:31.718 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:31.719 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:31.720 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:31.721 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:31.723 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:31.724 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:31.726 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:31.728 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:31.729 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:31.730 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:31.746 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:31.749 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:31.750 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:31.751 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:31.752 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:31.753 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:31.754 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:31.755 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:31.756 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:31.757 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:31.758 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 0.8911ms.
2025-04-23 21:19:31.760 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:31.761 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:31.762 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 31.961ms
2025-04-23 21:19:31.764 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:31.765 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:31.766 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:31.768 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 400 null application/json; charset=utf-8 59.1847ms
2025-04-23 21:19:37.312 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - null null
2025-04-23 21:19:37.315 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:19:37.316 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:19:37.318 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:37.319 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:37.320 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:37.320 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:37.321 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:37.322 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:37.323 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:37.324 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:37.325 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:37.327 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:37.329 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:37.330 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:37.332 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:37.334 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:37.336 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:37.337 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:37.339 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:37.340 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:37.341 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:37.343 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:37.344 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:37.346 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:37.347 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:37.348 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.0067ms.
2025-04-23 21:19:37.349 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:37.350 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:37.351 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 19.0546ms
2025-04-23 21:19:37.352 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:37.353 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:37.355 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:37.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - 400 null application/json; charset=utf-8 43.275ms
2025-04-23 21:19:41.064 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - null null
2025-04-23 21:19:41.067 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:19:41.068 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:19:41.069 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:41.071 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:41.072 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:41.073 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:41.074 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:41.075 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:41.076 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:41.078 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:41.079 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:41.081 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:41.082 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:41.084 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:41.085 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:41.087 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:41.089 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:41.090 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:41.091 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:41.093 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:41.095 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:41.096 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:41.097 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:41.098 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:41.099 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:41.100 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 0.8661ms.
2025-04-23 21:19:41.101 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:41.102 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:41.103 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 18.6062ms
2025-04-23 21:19:41.105 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:41.106 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:41.107 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:41.109 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - 400 null application/json; charset=utf-8 44.3919ms
2025-04-23 21:19:44.209 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - null null
2025-04-23 21:19:44.212 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:19:44.214 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:19:44.215 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:44.216 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:44.217 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:44.218 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:44.219 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:44.220 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:44.221 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:44.222 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:44.224 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:44.225 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:44.227 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:44.229 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:44.231 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:44.233 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:44.235 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:44.236 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:44.237 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:44.239 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:44.240 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:44.241 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:44.243 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:44.244 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:44.245 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:44.246 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.0296ms.
2025-04-23 21:19:44.248 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:44.249 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:44.250 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 19.5821ms
2025-04-23 21:19:44.252 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:44.253 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:44.254 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:44.255 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - 400 null application/json; charset=utf-8 45.7671ms
2025-04-23 21:19:47.284 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - null null
2025-04-23 21:19:47.287 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:19:47.288 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/evan_clark'
2025-04-23 21:19:47.290 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:47.291 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:47.292 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:47.293 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:47.294 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:47.295 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:47.296 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:47.298 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:47.300 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:47.301 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:47.303 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:47.304 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:47.306 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:47.307 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:47.309 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:47.311 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:47.312 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:47.314 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:47.315 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:47.316 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:47.318 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:47.319 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:47.320 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:47.321 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.0604ms.
2025-04-23 21:19:47.323 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:47.324 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:47.324 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 18.8527ms
2025-04-23 21:19:47.326 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:47.327 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:47.328 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:47.330 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/evan_clark - 400 null application/json; charset=utf-8 45.3079ms
2025-04-23 21:19:49.994 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - null null
2025-04-23 21:19:49.997 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:19:49.998 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/diana_martin'
2025-04-23 21:19:49.999 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:50.000 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:50.001 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:50.002 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:50.003 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:50.004 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:50.005 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:50.007 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:50.008 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:50.009 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:50.011 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:50.013 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:50.014 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:50.016 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:50.018 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:50.019 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:50.021 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:50.022 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:50.023 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:50.024 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:50.026 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:50.028 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:50.029 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:50.030 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.0125ms.
2025-04-23 21:19:50.032 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:50.033 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:50.034 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 19.5567ms
2025-04-23 21:19:50.035 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:50.036 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:50.037 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:50.039 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/diana_martin - 400 null application/json; charset=utf-8 44.1372ms
2025-04-23 21:19:53.290 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/george_hall - null null
2025-04-23 21:19:53.292 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/george_hall'
2025-04-23 21:19:53.293 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/george_hall'
2025-04-23 21:19:53.294 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:53.296 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:53.297 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:53.298 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:53.300 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:53.301 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:53.302 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:53.303 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:53.305 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:53.306 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:53.309 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:53.310 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:53.312 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:53.314 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:53.316 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:53.317 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:53.318 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:53.320 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:53.321 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:53.322 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:53.324 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:53.325 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:53.327 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:53.328 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.0495ms.
2025-04-23 21:19:53.329 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:53.330 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:53.331 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 18.9608ms
2025-04-23 21:19:53.332 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:53.333 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:53.334 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:53.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/george_hall - 400 null application/json; charset=utf-8 45.8542ms
2025-04-23 21:19:56.289 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/fay_lee - null null
2025-04-23 21:19:56.293 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/fay_lee'
2025-04-23 21:19:56.294 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/fay_lee'
2025-04-23 21:19:56.296 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:56.297 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:56.298 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:56.299 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:56.300 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:56.300 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:56.301 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:56.303 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:56.304 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:56.306 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:56.308 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:56.309 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:56.311 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:56.314 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:56.315 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:56.316 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:56.317 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:56.318 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:56.319 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:56.321 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:56.322 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:56.323 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:56.324 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:56.325 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.0627ms.
2025-04-23 21:19:56.327 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:56.328 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:56.330 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 18.4022ms
2025-04-23 21:19:56.331 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:56.332 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:56.333 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:56.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/fay_lee - 400 null application/json; charset=utf-8 44.9802ms
2025-04-23 21:19:58.944 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/jane_smith - null null
2025-04-23 21:19:58.946 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/jane_smith'
2025-04-23 21:19:58.947 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/jane_smith'
2025-04-23 21:19:58.949 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:58.950 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:19:58.951 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:19:58.952 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:19:58.953 +03:00 [DBG] Authorization was successful.
2025-04-23 21:19:58.954 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:58.955 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:19:58.957 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:19:58.959 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:19:58.960 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:19:58.962 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:19:58.964 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:19:58.966 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:58.968 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:19:58.970 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:19:58.971 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:19:58.972 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:19:58.974 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:58.975 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:19:58.977 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:19:58.978 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:19:58.980 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:19:58.981 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:19:58.982 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 0.9662ms.
2025-04-23 21:19:58.983 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:19:58.984 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:19:58.986 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 19.8953ms
2025-04-23 21:19:58.987 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:19:58.988 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:19:58.989 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:19:58.990 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/jane_smith - 400 null application/json; charset=utf-8 46.1456ms
2025-04-23 21:20:01.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/john_doe - null null
2025-04-23 21:20:01.729 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/john_doe'
2025-04-23 21:20:01.730 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/john_doe'
2025-04-23 21:20:01.731 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:20:01.733 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:20:01.734 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:20:01.735 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:20:01.736 +03:00 [DBG] Authorization was successful.
2025-04-23 21:20:01.737 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:20:01.738 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:20:01.740 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:20:01.741 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:20:01.742 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:20:01.744 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:20:01.745 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:20:01.746 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:20:01.748 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:20:01.750 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:20:01.751 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:20:01.752 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:20:01.753 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:20:01.754 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:20:01.756 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:20:01.757 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:20:01.758 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:20:01.759 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:20:01.760 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.0612ms.
2025-04-23 21:20:01.762 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:20:01.763 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:20:01.763 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 17.024ms
2025-04-23 21:20:01.765 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:20:01.766 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:20:01.767 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:20:01.769 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/john_doe - 400 null application/json; charset=utf-8 42.4968ms
2025-04-23 21:20:05.479 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/charlie_brown - null null
2025-04-23 21:20:05.482 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/charlie_brown'
2025-04-23 21:20:05.484 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/charlie_brown'
2025-04-23 21:20:05.486 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:20:05.487 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:20:05.489 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:20:05.490 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:20:05.492 +03:00 [DBG] Authorization was successful.
2025-04-23 21:20:05.493 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:20:05.495 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:20:05.497 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:20:05.500 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:20:05.502 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:20:05.504 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:20:05.507 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:20:05.509 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:20:05.512 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:20:05.515 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:20:05.517 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:20:05.518 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:20:05.520 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:20:05.522 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:20:05.524 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:20:05.526 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:20:05.528 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:20:05.529 +03:00 [INF] User "00000000-0000-0000-0000-000000000000" not found
2025-04-23 21:20:05.531 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1.3387ms.
2025-04-23 21:20:05.533 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:20:05.534 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:20:05.536 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 26.8339ms
2025-04-23 21:20:05.538 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:20:05.539 +03:00 [DBG] Connection id "0HNC2ICLC96FK" completed keep alive response.
2025-04-23 21:20:05.541 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:20:05.543 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/charlie_brown - 400 null application/json; charset=utf-8 63.8807ms
2025-04-23 21:21:45.434 +03:00 [INF] Application is shutting down...
2025-04-23 21:21:45.435 +03:00 [DBG] Hosting stopping
2025-04-23 21:21:45.443 +03:00 [DBG] Connection id "0HNC2ICLC96FK" disconnecting.
2025-04-23 21:21:45.445 +03:00 [DBG] Connection id "0HNC2ICLC96FK" stopped.
2025-04-23 21:21:45.447 +03:00 [DBG] Connection id "0HNC2ICLC96FK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:21:45.452 +03:00 [DBG] Hosting stopped
2025-04-23 21:21:51.285 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 21:21:51.380 +03:00 [DBG] Hosting starting
2025-04-23 21:21:51.393 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 21:21:51.406 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 21:21:51.414 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 21:21:51.423 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 21:21:51.427 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:21:51.431 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 21:21:51.432 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:21:51.438 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 21:21:51.440 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 21:21:51.442 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 21:21:51.443 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 21:21:51.487 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 21:21:51.489 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 21:21:51.490 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 21:21:51.490 +03:00 [INF] Hosting environment: Development
2025-04-23 21:21:51.492 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 21:21:51.493 +03:00 [DBG] Hosting started
2025-04-23 21:21:51.522 +03:00 [DBG] Connection id "0HNC2IERVTVA0" received FIN.
2025-04-23 21:21:51.531 +03:00 [DBG] Connection id "0HNC2IERVTVA0" accepted.
2025-04-23 21:21:51.533 +03:00 [DBG] Connection id "0HNC2IERVTVA0" started.
2025-04-23 21:21:51.541 +03:00 [DBG] Connection id "0HNC2IERVTVA0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:21:51.546 +03:00 [DBG] Connection id "0HNC2IERVTVA0" disconnecting.
2025-04-23 21:21:51.553 +03:00 [DBG] Connection id "0HNC2IERVTVA0" stopped.
2025-04-23 21:21:51.649 +03:00 [DBG] Connection id "0HNC2IERVTVA1" accepted.
2025-04-23 21:21:51.651 +03:00 [DBG] Connection id "0HNC2IERVTVA1" started.
2025-04-23 21:21:51.784 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 21:21:51.787 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 21:21:51.811 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 21:21:51.813 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:21:52.016 +03:00 [DBG] Connection id "0HNC2IERVTVA1" completed keep alive response.
2025-04-23 21:21:52.019 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 237.5895ms
2025-04-23 21:21:52.234 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 21:21:52.237 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 21:21:52.239 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:21:52.368 +03:00 [DBG] Connection id "0HNC2IERVTVA1" completed keep alive response.
2025-04-23 21:21:52.370 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 135.3646ms
2025-04-23 21:22:08.059 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - null null
2025-04-23 21:22:08.067 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:22:08.072 +03:00 [DBG] Endpoint 'API.Controllers.Test.TokenController.GetToken (API)' with route pattern 'api/Token/user/{userId}' is valid for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:22:08.075 +03:00 [DBG] Request matched endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:22:08.079 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:22:08.081 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 21:22:08.113 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:22:08.115 +03:00 [INF] Executing endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:22:08.140 +03:00 [INF] Route matched with {action = "GetToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetToken(System.Guid) on controller API.Controllers.Test.TokenController (API).
2025-04-23 21:22:08.142 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:22:08.144 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:22:08.146 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:22:08.148 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:22:08.149 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:22:08.152 +03:00 [DBG] Executing controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:22:08.272 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 21:22:08.314 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 21:22:08.925 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 21:22:09.098 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 21:22:09.236 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:22:09.239 +03:00 [DBG] Executed controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:22:09.245 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:22:09.248 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2025-04-23 21:22:09.250 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:22:09.252 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:22:09.253 +03:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:22:09.257 +03:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2025-04-23 21:22:09.269 +03:00 [INF] Executing action method API.Controllers.Test.TokenController.GetToken (API) - Validation state: "Valid"
2025-04-23 21:22:09.365 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(e => EF.Property<Guid>(e, "Id") == __id_0)'
2025-04-23 21:22:09.820 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:22:09.880 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:22:09.912 +03:00 [DBG] Created DbConnection. (28ms).
2025-04-23 21:22:09.918 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:22:10.101 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:22:10.107 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:22:10.116 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-23 21:22:10.126 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-04-23 21:22:10.137 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:22:10.193 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:22:10.231 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:22:10.241 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 37ms reading results.
2025-04-23 21:22:10.247 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:22:10.256 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (9ms).
2025-04-23 21:22:10.294 +03:00 [INF] Executed action method API.Controllers.Test.TokenController.GetToken (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1019.9614ms.
2025-04-23 21:22:10.303 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-23 21:22:10.308 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-23 21:22:10.310 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-23 21:22:10.311 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-23 21:22:10.319 +03:00 [INF] Executed action API.Controllers.Test.TokenController.GetToken (API) in 2164.571ms
2025-04-23 21:22:10.321 +03:00 [INF] Executed endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:22:10.327 +03:00 [DBG] Connection id "0HNC2IERVTVA1" completed keep alive response.
2025-04-23 21:22:10.333 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:22:10.339 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:22:10.342 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-23 21:22:10.345 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - 200 null text/plain; charset=utf-8 2286.0143ms
2025-04-23 21:22:24.523 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:22:24.526 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:22:24.527 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:22:24.529 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:22:24.530 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:22:24.583 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:22:24.585 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:22:24.589 +03:00 [DBG] Authorization was successful.
2025-04-23 21:22:24.590 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:22:24.596 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:22:24.598 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:22:24.599 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:22:24.600 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:22:24.602 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:22:24.603 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:22:24.604 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:22:24.666 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:22:24.783 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:22:24.785 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:22:24.787 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:22:24.788 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:22:24.789 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:22:24.791 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:22:24.795 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:22:24.797 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:22:24.800 +03:00 [INF] Couldn't parse from null to "00000000-0000-0000-0000-000000000000"
2025-04-23 21:22:24.801 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 3.1964ms.
2025-04-23 21:22:24.803 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:22:24.806 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:22:24.814 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 210.1029ms
2025-04-23 21:22:24.816 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:22:24.817 +03:00 [DBG] Connection id "0HNC2IERVTVA1" completed keep alive response.
2025-04-23 21:22:24.818 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:22:24.819 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 400 null application/json; charset=utf-8 296.1206ms
2025-04-23 21:24:19.860 +03:00 [DBG] Connection id "0HNC2IERVTVA1" received FIN.
2025-04-23 21:24:19.861 +03:00 [DBG] Connection id "0HNC2IERVTVA1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:24:19.862 +03:00 [DBG] Connection id "0HNC2IERVTVA1" disconnecting.
2025-04-23 21:24:19.865 +03:00 [DBG] Connection id "0HNC2IERVTVA1" stopped.
2025-04-23 21:30:09.865 +03:00 [INF] Application is shutting down...
2025-04-23 21:30:09.867 +03:00 [DBG] Hosting stopping
2025-04-23 21:30:09.880 +03:00 [DBG] Hosting stopped
2025-04-23 21:30:15.382 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 21:30:15.485 +03:00 [DBG] Hosting starting
2025-04-23 21:30:15.498 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 21:30:15.512 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 21:30:15.521 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 21:30:15.532 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 21:30:15.537 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:30:15.542 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 21:30:15.544 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:30:15.551 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 21:30:15.553 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 21:30:15.556 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 21:30:15.558 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 21:30:15.604 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 21:30:15.605 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 21:30:15.606 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 21:30:15.607 +03:00 [INF] Hosting environment: Development
2025-04-23 21:30:15.608 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 21:30:15.609 +03:00 [DBG] Hosting started
2025-04-23 21:30:15.952 +03:00 [DBG] Connection id "0HNC2IJIAHLO7" received FIN.
2025-04-23 21:30:15.961 +03:00 [DBG] Connection id "0HNC2IJIAHLO7" accepted.
2025-04-23 21:30:15.963 +03:00 [DBG] Connection id "0HNC2IJIAHLO7" started.
2025-04-23 21:30:15.972 +03:00 [DBG] Connection id "0HNC2IJIAHLO7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:30:15.976 +03:00 [DBG] Connection id "0HNC2IJIAHLO7" disconnecting.
2025-04-23 21:30:15.985 +03:00 [DBG] Connection id "0HNC2IJIAHLO7" stopped.
2025-04-23 21:30:16.079 +03:00 [DBG] Connection id "0HNC2IJIAHLO8" accepted.
2025-04-23 21:30:16.081 +03:00 [DBG] Connection id "0HNC2IJIAHLO8" started.
2025-04-23 21:30:16.265 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 21:30:16.269 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 21:30:16.290 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 21:30:16.293 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:30:16.487 +03:00 [DBG] Connection id "0HNC2IJIAHLO8" completed keep alive response.
2025-04-23 21:30:16.490 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 227.5456ms
2025-04-23 21:30:16.672 +03:00 [DBG] Connection id "0HNC2IJIAHLO8" received FIN.
2025-04-23 21:30:16.672 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/favicon-32x32.png - null null
2025-04-23 21:30:16.673 +03:00 [DBG] Connection id "0HNC2IJIAHLO8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:30:16.676 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-04-23 21:30:16.678 +03:00 [DBG] Connection id "0HNC2IJIAHLO8" disconnecting.
2025-04-23 21:30:16.679 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:30:16.688 +03:00 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2025-04-23 21:30:16.702 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-23 21:30:16.704 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/favicon-32x32.png - 499 628 image/png 31.6449ms
2025-04-23 21:30:16.709 +03:00 [DBG] Connection id "0HNC2IJIAHLO8" stopped.
2025-04-23 21:30:16.738 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" accepted.
2025-04-23 21:30:16.740 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" started.
2025-04-23 21:30:16.741 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 21:30:16.744 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 21:30:16.745 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:30:16.861 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" completed keep alive response.
2025-04-23 21:30:16.863 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.9902ms
2025-04-23 21:30:21.435 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - null null
2025-04-23 21:30:21.442 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:30:21.448 +03:00 [DBG] Endpoint 'API.Controllers.Test.TokenController.GetToken (API)' with route pattern 'api/Token/user/{userId}' is valid for the request path '/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1'
2025-04-23 21:30:21.450 +03:00 [DBG] Request matched endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:30:21.452 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:30:21.453 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 21:30:21.486 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:30:21.488 +03:00 [INF] Executing endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:30:21.513 +03:00 [INF] Route matched with {action = "GetToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] GetToken(System.Guid) on controller API.Controllers.Test.TokenController (API).
2025-04-23 21:30:21.516 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:30:21.518 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:30:21.519 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:30:21.521 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:30:21.522 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:30:21.524 +03:00 [DBG] Executing controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:30:21.648 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 21:30:21.690 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 21:30:22.308 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 21:30:22.488 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 21:30:22.630 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:30:22.633 +03:00 [DBG] Executed controller factory for controller API.Controllers.Test.TokenController (API)
2025-04-23 21:30:22.638 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:30:22.641 +03:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Guid' using the name 'userId' in request data ...
2025-04-23 21:30:22.643 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:30:22.644 +03:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Guid'.
2025-04-23 21:30:22.645 +03:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Guid' ...
2025-04-23 21:30:22.647 +03:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Guid'.
2025-04-23 21:30:22.658 +03:00 [INF] Executing action method API.Controllers.Test.TokenController.GetToken (API) - Validation state: "Valid"
2025-04-23 21:30:22.753 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(e => EF.Property<Guid>(e, "Id") == __id_0)'
2025-04-23 21:30:23.215 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:30:23.274 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:30:23.305 +03:00 [DBG] Created DbConnection. (27ms).
2025-04-23 21:30:23.312 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:30:23.496 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:30:23.503 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:30:23.512 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-23 21:30:23.523 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-04-23 21:30:23.534 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:30:23.591 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:30:23.630 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:30:23.641 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 39ms reading results.
2025-04-23 21:30:23.646 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:30:23.656 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (9ms).
2025-04-23 21:30:23.693 +03:00 [INF] Executed action method API.Controllers.Test.TokenController.GetToken (API), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1029.6026ms.
2025-04-23 21:30:23.702 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-04-23 21:30:23.706 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-04-23 21:30:23.708 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-04-23 21:30:23.710 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-04-23 21:30:23.717 +03:00 [INF] Executed action API.Controllers.Test.TokenController.GetToken (API) in 2189.1897ms
2025-04-23 21:30:23.719 +03:00 [INF] Executed endpoint 'API.Controllers.Test.TokenController.GetToken (API)'
2025-04-23 21:30:23.725 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" completed keep alive response.
2025-04-23 21:30:23.730 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:30:23.738 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:30:23.740 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-04-23 21:30:23.742 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/Token/user/fc10fcc9-f49d-41a5-9379-077428d5bfc1 - 200 null text/plain; charset=utf-8 2307.4274ms
2025-04-23 21:30:34.139 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/sd - null null
2025-04-23 21:30:34.143 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/sd'
2025-04-23 21:30:34.144 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/sd'
2025-04-23 21:30:34.145 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:30:34.147 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:30:34.197 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:30:34.199 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:30:34.204 +03:00 [DBG] Authorization was successful.
2025-04-23 21:30:34.204 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:30:34.209 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:30:34.211 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:30:34.212 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:30:34.213 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:30:34.215 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:30:34.216 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:30:34.217 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:30:34.278 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:30:34.393 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:30:34.395 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:30:34.396 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:30:34.397 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:30:34.398 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:30:34.400 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:30:34.404 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:30:34.406 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:30:34.408 +03:00 [INF] Couldn't parse from null to "00000000-0000-0000-0000-000000000000"
2025-04-23 21:30:34.410 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 2.6968ms.
2025-04-23 21:30:34.411 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:30:34.416 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:30:34.424 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 206.5001ms
2025-04-23 21:30:34.425 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:30:34.426 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" completed keep alive response.
2025-04-23 21:30:34.427 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:30:34.428 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/sd - 400 null application/json; charset=utf-8 289.1283ms
2025-04-23 21:31:17.284 +03:00 [INF] Application is shutting down...
2025-04-23 21:31:17.286 +03:00 [DBG] Hosting stopping
2025-04-23 21:31:17.292 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" disconnecting.
2025-04-23 21:31:17.293 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" stopped.
2025-04-23 21:31:17.294 +03:00 [DBG] Connection id "0HNC2IJIAHLO9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:31:17.300 +03:00 [DBG] Hosting stopped
2025-04-23 21:36:37.706 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 21:36:37.825 +03:00 [DBG] Hosting starting
2025-04-23 21:36:37.842 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 21:36:37.860 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 21:36:37.871 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 21:36:37.881 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 21:36:37.887 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:36:37.892 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 21:36:37.894 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:36:37.903 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 21:36:37.906 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 21:36:37.909 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 21:36:37.911 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 21:36:37.969 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 21:36:37.970 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 21:36:37.972 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 21:36:37.973 +03:00 [INF] Hosting environment: Development
2025-04-23 21:36:37.974 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 21:36:37.975 +03:00 [DBG] Hosting started
2025-04-23 21:36:38.359 +03:00 [DBG] Connection id "0HNC2IN49F7VS" received FIN.
2025-04-23 21:36:38.371 +03:00 [DBG] Connection id "0HNC2IN49F7VS" accepted.
2025-04-23 21:36:38.374 +03:00 [DBG] Connection id "0HNC2IN49F7VS" started.
2025-04-23 21:36:38.385 +03:00 [DBG] Connection id "0HNC2IN49F7VS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:36:38.391 +03:00 [DBG] Connection id "0HNC2IN49F7VS" disconnecting.
2025-04-23 21:36:38.399 +03:00 [DBG] Connection id "0HNC2IN49F7VS" stopped.
2025-04-23 21:36:38.494 +03:00 [DBG] Connection id "0HNC2IN49F7VT" accepted.
2025-04-23 21:36:38.497 +03:00 [DBG] Connection id "0HNC2IN49F7VT" started.
2025-04-23 21:36:38.789 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 21:36:38.794 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 21:36:38.817 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 21:36:38.819 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:36:39.024 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:36:39.027 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 239.2955ms
2025-04-23 21:36:39.444 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 21:36:39.447 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 21:36:39.449 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:36:39.570 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:36:39.571 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.5566ms
2025-04-23 21:37:18.239 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:37:18.247 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:37:18.253 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:37:18.255 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:18.257 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:37:18.259 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 21:37:18.358 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:37:18.361 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:37:18.366 +03:00 [DBG] Authorization was successful.
2025-04-23 21:37:18.368 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:18.392 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:37:18.394 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:37:18.396 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:37:18.398 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:37:18.400 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:37:18.402 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:37:18.405 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:18.524 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 21:37:18.565 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 21:37:19.177 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 21:37:19.357 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 21:37:19.495 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:37:19.620 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:19.625 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:37:19.627 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:37:19.630 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:19.631 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:19.632 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:37:19.637 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:37:19.649 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:37:19.653 +03:00 [INF] Starting to get user info for hannah_young
2025-04-23 21:37:19.787 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(o => o.Username.Equals(__userName_0))'
2025-04-23 21:37:20.262 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:37:20.323 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:37:20.355 +03:00 [DBG] Created DbConnection. (27ms).
2025-04-23 21:37:20.361 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:20.543 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:20.549 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:37:20.558 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-23 21:37:20.569 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-04-23 21:37:20.580 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:20.638 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:20.675 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:20.686 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 37ms reading results.
2025-04-23 21:37:20.692 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:20.706 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (12ms).
2025-04-23 21:37:20.722 +03:00 [INF] User hannah_young found
2025-04-23 21:37:20.730 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1073.8521ms.
2025-04-23 21:37:20.738 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:37:20.747 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:37:20.777 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 2368.5526ms
2025-04-23 21:37:20.779 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:20.785 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:37:20.791 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:37:20.799 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:20.803 +03:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-04-23 21:37:20.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 200 null application/json; charset=utf-8 2565.678ms
2025-04-23 21:37:26.188 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - null null
2025-04-23 21:37:26.192 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:37:26.193 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:37:26.194 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:26.195 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:37:26.197 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:37:26.198 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:37:26.200 +03:00 [DBG] Authorization was successful.
2025-04-23 21:37:26.203 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:26.204 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:37:26.206 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:37:26.207 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:37:26.209 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:37:26.210 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:37:26.211 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:37:26.213 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:26.275 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:37:26.277 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:26.279 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:37:26.280 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:37:26.281 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:26.282 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:26.284 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:37:26.285 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:37:26.287 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:37:26.288 +03:00 [INF] Starting to get user info for bob_jones
2025-04-23 21:37:26.294 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:37:26.296 +03:00 [DBG] Created DbConnection. (2ms).
2025-04-23 21:37:26.297 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:26.301 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:26.303 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:37:26.304 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:37:26.305 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:37:26.306 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:26.311 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:26.314 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:26.315 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-04-23 21:37:26.316 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:26.318 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:37:26.323 +03:00 [INF] User bob_jones found
2025-04-23 21:37:26.324 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 35.9611ms.
2025-04-23 21:37:26.325 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:37:26.326 +03:00 [INF] Writing value of type 'ReadUserDto' as Json.
2025-04-23 21:37:26.339 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 126.8716ms
2025-04-23 21:37:26.341 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:26.342 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:37:26.343 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:37:26.344 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:26.345 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:37:26.347 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - 200 null application/json; charset=utf-8 158.2557ms
2025-04-23 21:37:30.426 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - null null
2025-04-23 21:37:30.429 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:37:30.431 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/alice_williams'
2025-04-23 21:37:30.432 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:30.433 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:37:30.436 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:37:30.437 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:37:30.439 +03:00 [DBG] Authorization was successful.
2025-04-23 21:37:30.439 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:30.440 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:37:30.442 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:37:30.443 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:37:30.445 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:37:30.447 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:37:30.448 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:37:30.450 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:30.469 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:37:30.471 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:30.472 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:37:30.474 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:37:30.475 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:30.477 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:30.478 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:37:30.479 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:37:30.480 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:37:30.481 +03:00 [INF] Starting to get user info for alice_williams
2025-04-23 21:37:30.486 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:37:30.486 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:37:30.487 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:30.489 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:30.490 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:37:30.491 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:37:30.492 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:37:30.493 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:30.495 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:30.498 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:30.500 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-04-23 21:37:30.502 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:30.504 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:37:30.506 +03:00 [INF] User alice_williams found
2025-04-23 21:37:30.507 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 25.7773ms.
2025-04-23 21:37:30.509 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:37:30.510 +03:00 [INF] Writing value of type 'ReadUserDto' as Json.
2025-04-23 21:37:30.511 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 60.5363ms
2025-04-23 21:37:30.512 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:30.513 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:37:30.514 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:37:30.516 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:30.517 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:37:30.519 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/alice_williams - 200 null application/json; charset=utf-8 92.269ms
2025-04-23 21:37:35.297 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:37:35.301 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:37:35.303 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:37:35.304 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:35.305 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:37:35.306 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:37:35.307 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:37:35.308 +03:00 [DBG] Authorization was successful.
2025-04-23 21:37:35.309 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:35.310 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:37:35.312 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:37:35.314 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:37:35.315 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:37:35.317 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:37:35.318 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:37:35.320 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:35.322 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:37:35.324 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:35.325 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:37:35.326 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:37:35.327 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:35.328 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:35.329 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:37:35.330 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:37:35.332 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:37:35.332 +03:00 [INF] Starting to get user info for hannah_young
2025-04-23 21:37:35.334 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:37:35.335 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-23 21:37:35.336 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:35.338 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:35.339 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:37:35.340 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:37:35.340 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:37:35.342 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:35.344 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:35.346 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:35.347 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:37:35.349 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:35.350 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:37:35.353 +03:00 [INF] User hannah_young found
2025-04-23 21:37:35.354 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.2222ms.
2025-04-23 21:37:35.355 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:37:35.356 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:37:35.358 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 37.9951ms
2025-04-23 21:37:35.359 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:35.360 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:37:35.361 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:37:35.362 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:35.364 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:37:35.365 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 200 null application/json; charset=utf-8 67.9856ms
2025-04-23 21:37:39.452 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - null null
2025-04-23 21:37:39.454 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:37:39.455 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:37:39.456 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:39.457 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:37:39.459 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:37:39.460 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:37:39.461 +03:00 [DBG] Authorization was successful.
2025-04-23 21:37:39.462 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:39.463 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:37:39.465 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:37:39.466 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:37:39.468 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:37:39.470 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:37:39.471 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:37:39.472 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:39.475 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:37:39.476 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:39.477 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:37:39.478 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:37:39.479 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:39.480 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:39.481 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:37:39.482 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:37:39.484 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:37:39.485 +03:00 [INF] Starting to get user info for vlad
2025-04-23 21:37:39.487 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:37:39.487 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:37:39.489 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:39.490 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:39.492 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:37:39.492 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:37:39.494 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:37:39.495 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:39.498 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:39.500 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:39.501 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:37:39.503 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:39.504 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:37:39.506 +03:00 [INF] User vlad found
2025-04-23 21:37:39.507 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.8393ms.
2025-04-23 21:37:39.508 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:37:39.509 +03:00 [INF] Writing value of type 'ReadUserDto' as Json.
2025-04-23 21:37:39.509 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 37.315ms
2025-04-23 21:37:39.511 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:39.512 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:37:39.513 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:37:39.514 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:39.515 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:37:39.516 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - 200 null application/json; charset=utf-8 64.6631ms
2025-04-23 21:37:45.094 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - null null
2025-04-23 21:37:45.096 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:37:45.097 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/hannah_young'
2025-04-23 21:37:45.098 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:45.099 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:37:45.101 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:37:45.101 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:37:45.103 +03:00 [DBG] Authorization was successful.
2025-04-23 21:37:45.103 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:45.105 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:37:45.106 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:37:45.108 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:37:45.110 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:37:45.112 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:37:45.113 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:37:45.114 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:45.117 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:37:45.119 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:37:45.120 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:37:45.121 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:37:45.122 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:45.124 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:37:45.125 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:37:45.126 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:37:45.127 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:37:45.128 +03:00 [INF] Starting to get user info for hannah_young
2025-04-23 21:37:45.130 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:37:45.131 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:37:45.132 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:45.133 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:45.135 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:37:45.136 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:37:45.137 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:37:45.139 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:45.141 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:37:45.143 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:45.144 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:37:45.146 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:45.147 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:37:45.148 +03:00 [INF] User hannah_young found
2025-04-23 21:37:45.150 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.1729ms.
2025-04-23 21:37:45.152 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:37:45.153 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:37:45.154 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 40.0293ms
2025-04-23 21:37:45.156 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:37:45.157 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:37:45.158 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:37:45.159 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:37:45.161 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:37:45.162 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/hannah_young - 200 null application/json; charset=utf-8 67.7755ms
2025-04-23 21:38:10.452 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - null null
2025-04-23 21:38:10.454 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:38:10.455 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/bob_jones'
2025-04-23 21:38:10.456 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:38:10.457 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:38:10.458 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:38:10.459 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:38:10.460 +03:00 [DBG] Authorization was successful.
2025-04-23 21:38:10.461 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:38:10.462 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:38:10.464 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:38:10.465 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:38:10.467 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:38:10.469 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:38:10.470 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:38:10.471 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:38:10.473 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:38:10.474 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:38:10.477 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:38:10.478 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:38:10.480 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:38:10.481 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:38:10.482 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:38:10.484 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:38:10.486 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:38:10.487 +03:00 [INF] Starting to get user info for bob_jones
2025-04-23 21:38:10.488 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:38:10.489 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:38:10.490 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:38:10.492 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:38:10.493 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:38:10.494 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:38:10.495 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:38:10.497 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:38:10.499 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:38:10.502 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:38:10.503 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:38:10.505 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:38:10.506 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:38:10.507 +03:00 [INF] User bob_jones found
2025-04-23 21:38:10.508 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 21.733ms.
2025-04-23 21:38:10.510 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:38:10.511 +03:00 [INF] Writing value of type 'ReadUserDto' as Json.
2025-04-23 21:38:10.512 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 41.1709ms
2025-04-23 21:38:10.514 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:38:10.515 +03:00 [DBG] Connection id "0HNC2IN49F7VT" completed keep alive response.
2025-04-23 21:38:10.516 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:38:10.518 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:38:10.519 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:38:10.520 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/bob_jones - 200 null application/json; charset=utf-8 68.848ms
2025-04-23 21:38:21.878 +03:00 [INF] Application is shutting down...
2025-04-23 21:38:21.879 +03:00 [DBG] Hosting stopping
2025-04-23 21:38:21.886 +03:00 [DBG] Connection id "0HNC2IN49F7VT" disconnecting.
2025-04-23 21:38:21.889 +03:00 [DBG] Connection id "0HNC2IN49F7VT" stopped.
2025-04-23 21:38:21.889 +03:00 [DBG] Connection id "0HNC2IN49F7VT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:38:21.896 +03:00 [DBG] Hosting stopped
2025-04-23 21:47:45.751 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 21:47:45.849 +03:00 [DBG] Hosting starting
2025-04-23 21:47:45.863 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 21:47:45.877 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 21:47:45.885 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 21:47:45.896 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 21:47:45.900 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:47:45.904 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 21:47:45.906 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:47:45.912 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 21:47:45.914 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 21:47:45.916 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 21:47:45.918 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 21:47:45.966 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 21:47:45.967 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 21:47:45.968 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 21:47:45.969 +03:00 [INF] Hosting environment: Development
2025-04-23 21:47:45.969 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 21:47:45.970 +03:00 [DBG] Hosting started
2025-04-23 21:47:46.100 +03:00 [DBG] Connection id "0HNC2ITB9HG5Q" received FIN.
2025-04-23 21:47:46.108 +03:00 [DBG] Connection id "0HNC2ITB9HG5Q" accepted.
2025-04-23 21:47:46.110 +03:00 [DBG] Connection id "0HNC2ITB9HG5Q" started.
2025-04-23 21:47:46.118 +03:00 [DBG] Connection id "0HNC2ITB9HG5Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:47:46.122 +03:00 [DBG] Connection id "0HNC2ITB9HG5Q" disconnecting.
2025-04-23 21:47:46.130 +03:00 [DBG] Connection id "0HNC2ITB9HG5Q" stopped.
2025-04-23 21:47:46.202 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" accepted.
2025-04-23 21:47:46.204 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" started.
2025-04-23 21:47:46.321 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 21:47:46.325 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 21:47:46.345 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 21:47:46.346 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:47:46.534 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:47:46.537 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 217.0543ms
2025-04-23 21:47:46.713 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 21:47:46.716 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 21:47:46.717 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:47:46.847 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:47:46.848 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.8344ms
2025-04-23 21:48:23.349 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/register - application/json 174
2025-04-23 21:48:23.356 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-04-23 21:48:23.361 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-04-23 21:48:23.363 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:23.366 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:48:23.367 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 21:48:23.400 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:48:23.403 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:23.428 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:48:23.431 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:48:23.433 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:48:23.435 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:48:23.437 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:48:23.439 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:48:23.442 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:23.444 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:23.449 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-04-23 21:48:23.452 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-04-23 21:48:23.454 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:48:23.470 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000003": started reading request body.
2025-04-23 21:48:23.472 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000003": done reading request body.
2025-04-23 21:48:23.497 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-04-23 21:48:23.498 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:23.499 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:23.501 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-04-23 21:48:23.509 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:23.520 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Valid"
2025-04-23 21:48:23.524 +03:00 [INF] Starting to register user vlados_pisos - string
2025-04-23 21:48:23.595 +03:00 [ERR] Failed to register User : vlados_pisos - string. Message : Validation failed: 
 -- DateOfBirth: 'Date Of Birth' must be less than '1/1/2010 12:00:00 AM'. Severity: Error
2025-04-23 21:48:23.600 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 74.6822ms.
2025-04-23 21:48:23.610 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:48:23.612 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:48:23.624 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 179.1552ms
2025-04-23 21:48:23.626 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:23.627 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:48:23.628 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/register - 400 null application/json; charset=utf-8 279.6215ms
2025-04-23 21:48:36.168 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/register - application/json 160
2025-04-23 21:48:36.171 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-04-23 21:48:36.173 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-04-23 21:48:36.174 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:36.176 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:48:36.178 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:48:36.179 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:36.180 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:48:36.182 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:48:36.183 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:48:36.184 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:48:36.186 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:48:36.187 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:48:36.188 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:36.189 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:36.191 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-04-23 21:48:36.192 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-04-23 21:48:36.193 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:48:36.194 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000004": started reading request body.
2025-04-23 21:48:36.195 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000004": done reading request body.
2025-04-23 21:48:36.196 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-04-23 21:48:36.197 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:36.198 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:36.198 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-04-23 21:48:36.199 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:36.201 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Valid"
2025-04-23 21:48:36.201 +03:00 [INF] Starting to register user vlados_pisos - string
2025-04-23 21:48:36.348 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 21:48:36.390 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 21:48:37.088 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 21:48:37.280 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 21:48:37.452 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:48:37.472 +03:00 [ERR] Failed to register User : vlados_pisos - string. Message : Invalid email address format. (Parameter 'address')
2025-04-23 21:48:37.474 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1272.4178ms.
2025-04-23 21:48:37.476 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:48:37.477 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:48:37.478 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 1289.9229ms
2025-04-23 21:48:37.479 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:37.480 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:48:37.484 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:48:37.488 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/register - 400 null application/json; charset=utf-8 1320.1202ms
2025-04-23 21:48:47.833 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/register - application/json 169
2025-04-23 21:48:47.836 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-04-23 21:48:47.837 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Register (API)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-04-23 21:48:47.839 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:47.840 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:48:47.843 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:48:47.844 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:47.845 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.Guid],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Register(Application.DTOs.User.RegisterUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:48:47.847 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:48:47.848 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:48:47.850 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:48:47.851 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:48:47.853 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:48:47.854 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:47.856 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:47.857 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-04-23 21:48:47.858 +03:00 [DBG] Attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' using the name '' in request data ...
2025-04-23 21:48:47.859 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:48:47.860 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000005": started reading request body.
2025-04-23 21:48:47.861 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000005": done reading request body.
2025-04-23 21:48:47.862 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.RegisterUserDto'
2025-04-23 21:48:47.863 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:47.864 +03:00 [DBG] Done attempting to bind parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:47.865 +03:00 [DBG] Attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto' ...
2025-04-23 21:48:47.866 +03:00 [DBG] Done attempting to validate the bound parameter 'registerDto' of type 'Application.DTOs.User.RegisterUserDto'.
2025-04-23 21:48:47.867 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Register (API) - Validation state: "Valid"
2025-04-23 21:48:47.868 +03:00 [INF] Starting to register user vlados_pisos - string@mail.com
2025-04-23 21:48:47.934 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:48:48.011 +03:00 [DBG] 'MessengerDbContext' generated a temporary value for the property 'UserEntity.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-23 21:48:48.112 +03:00 [DBG] Context 'MessengerDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-23 21:48:48.117 +03:00 [DBG] SaveChanges starting for 'MessengerDbContext'.
2025-04-23 21:48:48.124 +03:00 [DBG] DetectChanges starting for 'MessengerDbContext'.
2025-04-23 21:48:48.143 +03:00 [DBG] DetectChanges completed for 'MessengerDbContext'.
2025-04-23 21:48:48.337 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:48:48.367 +03:00 [DBG] Created DbConnection. (29ms).
2025-04-23 21:48:48.373 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:48:48.562 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:48:48.574 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:48:48.582 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-04-23 21:48:48.596 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2025-04-23 21:48:48.608 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-23 21:48:48.668 +03:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Date), @p2='?' (Size = 450), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 255), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [DateOfBirth], [Email], [FirstName], [LastName], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-04-23 21:48:48.693 +03:00 [DBG] The foreign key property 'UserEntity.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-04-23 21:48:48.707 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:48:48.717 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 38ms reading results.
2025-04-23 21:48:48.724 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:48:48.732 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (8ms).
2025-04-23 21:48:48.748 +03:00 [DBG] An entity of type 'UserEntity' tracked by 'MessengerDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-23 21:48:48.753 +03:00 [DBG] SaveChanges completed for 'MessengerDbContext' with 1 entities written to the database.
2025-04-23 21:48:48.760 +03:00 [INF] Registered User: vlados_pisos - string@mail.com
2025-04-23 21:48:48.763 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Register (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 895.2198ms.
2025-04-23 21:48:48.770 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:48:48.774 +03:00 [INF] Writing value of type 'Guid' as Json.
2025-04-23 21:48:48.782 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Register (API) in 927.8881ms
2025-04-23 21:48:48.784 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Register (API)'
2025-04-23 21:48:48.790 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:48:48.791 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:48:48.796 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:48:48.799 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-23 21:48:48.801 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/register - 200 null application/json; charset=utf-8 967.4905ms
2025-04-23 21:48:59.587 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 50
2025-04-23 21:48:59.589 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:48:59.591 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:48:59.592 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:48:59.593 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:48:59.595 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:48:59.596 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:48:59.601 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:48:59.603 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:48:59.604 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:48:59.606 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:48:59.607 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:48:59.609 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:48:59.612 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:59.613 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:48:59.615 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:48:59.616 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:48:59.617 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:48:59.619 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000006": started reading request body.
2025-04-23 21:48:59.621 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000006": done reading request body.
2025-04-23 21:48:59.623 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:48:59.624 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:48:59.626 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:48:59.627 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:48:59.630 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:48:59.631 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:48:59.633 +03:00 [INF] Starting to login User: string - string
2025-04-23 21:48:59.647 +03:00 [ERR] Failed to login User: string - string. Message : Validation failed: 
 -- Password: Password must contain at least 8 characters Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- Password: Password must contain at least 8 characters Severity: Error
   at Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ValidationBehaivor.cs:line 24
   at API.Controllers.Auth.AuthController.Login(LoginUserDto loginDto) in C:\Users\User\source\repos\DDD_Messanger\API\Controllers\Auth\AuthController.cs:line 38
2025-04-23 21:48:59.662 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 29.8379ms.
2025-04-23 21:48:59.664 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:48:59.665 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:48:59.666 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 54.4509ms
2025-04-23 21:48:59.668 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:48:59.669 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:48:59.670 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 400 null application/json; charset=utf-8 83.0732ms
2025-04-23 21:49:06.354 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 56
2025-04-23 21:49:06.357 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:49:06.358 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:49:06.360 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:06.362 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:06.363 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:49:06.364 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:06.365 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:49:06.366 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:06.367 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:06.368 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:06.370 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:06.371 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:06.373 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:06.374 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:06.375 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:06.376 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:49:06.377 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:49:06.378 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000007": started reading request body.
2025-04-23 21:49:06.379 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000007": done reading request body.
2025-04-23 21:49:06.380 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:49:06.381 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:06.382 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:06.383 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:06.384 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:06.385 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:49:06.386 +03:00 [INF] Starting to login User: vlados_pisos - string
2025-04-23 21:49:06.389 +03:00 [ERR] Failed to login User: vlados_pisos - string. Message : Validation failed: 
 -- Password: Password must contain at least 8 characters Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- Password: Password must contain at least 8 characters Severity: Error
   at Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ValidationBehaivor.cs:line 24
   at API.Controllers.Auth.AuthController.Login(LoginUserDto loginDto) in C:\Users\User\source\repos\DDD_Messanger\API\Controllers\Auth\AuthController.cs:line 38
2025-04-23 21:49:06.391 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 5.2394ms.
2025-04-23 21:49:06.393 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:49:06.393 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:49:06.394 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 21.7614ms
2025-04-23 21:49:06.395 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:06.396 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:06.397 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 400 null application/json; charset=utf-8 43.005ms
2025-04-23 21:49:09.089 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 56
2025-04-23 21:49:09.092 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:49:09.093 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:49:09.094 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:09.095 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:09.096 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:49:09.097 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:09.098 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:49:09.099 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:09.100 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:09.101 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:09.103 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:09.104 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:09.105 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:09.107 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:09.108 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:09.110 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:49:09.111 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:49:09.112 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000008": started reading request body.
2025-04-23 21:49:09.114 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000008": done reading request body.
2025-04-23 21:49:09.115 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:49:09.116 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:09.117 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:09.118 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:09.119 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:09.120 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:49:09.121 +03:00 [INF] Starting to login User: vlados_pisos - string
2025-04-23 21:49:09.124 +03:00 [ERR] Failed to login User: vlados_pisos - string. Message : Validation failed: 
 -- Password: Password must contain at least 8 characters Severity: Error
FluentValidation.ValidationException: Validation failed: 
 -- Password: Password must contain at least 8 characters Severity: Error
   at Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ValidationBehaivor.cs:line 24
   at API.Controllers.Auth.AuthController.Login(LoginUserDto loginDto) in C:\Users\User\source\repos\DDD_Messanger\API\Controllers\Auth\AuthController.cs:line 38
2025-04-23 21:49:09.127 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 5.4312ms.
2025-04-23 21:49:09.128 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:49:09.129 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:49:09.130 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 24.3267ms
2025-04-23 21:49:09.131 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:09.131 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:09.133 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 400 null application/json; charset=utf-8 43.1651ms
2025-04-23 21:49:18.073 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 61
2025-04-23 21:49:18.075 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:49:18.076 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:49:18.078 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:18.080 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:18.081 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:49:18.082 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:18.083 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:49:18.085 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:18.087 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:18.088 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:18.090 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:18.091 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:18.093 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:18.094 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:18.095 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:18.097 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:49:18.098 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:49:18.099 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000009": started reading request body.
2025-04-23 21:49:18.100 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:00000009": done reading request body.
2025-04-23 21:49:18.102 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:49:18.103 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:18.104 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:18.105 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:18.107 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:18.108 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:49:18.109 +03:00 [INF] Starting to login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:18.130 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:49:18.216 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(o => o.Username.Equals(__userName_0))'
2025-04-23 21:49:18.621 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:49:18.677 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:49:18.678 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-23 21:49:18.679 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:18.682 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:18.684 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:49:18.685 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:49:18.686 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:49:18.687 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:18.693 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:18.712 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:18.713 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 17ms reading results.
2025-04-23 21:49:18.715 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:18.716 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:49:18.750 +03:00 [INF] Login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:18.751 +03:00 [INF] Token generated for user - vlados_pisos. Token : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NGVjOTUwOC02NzIwLTQ3NGMtODU5OS0zMzMxZTU1YjI4NzgiLCJlbWFpbCI6InN0cmluZ0BtYWlsLmNvbSIsImp0aSI6IjNhYmNhYjYwLTc4ZDMtNDdlNC05ZjFkLThjMjJmNzFiNWQyZiIsInVuaXF1ZV9uYW1lIjoidmxhZG9zX3Bpc29zIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NTA3NyIsImh0dHA6Ly9sb2NhbGhvc3Q6NDI0NDciXSwiZXhwIjoxNzQ1NDM3NzU4LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjUwNzcifQ.IdYPINvNYgPLhUqM2hYm0Al3ZNlb_79iEq1UVbFRoBc
2025-04-23 21:49:18.752 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 643.0023ms.
2025-04-23 21:49:18.753 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:49:18.754 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:49:18.755 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 662.8044ms
2025-04-23 21:49:18.757 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:18.758 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:18.759 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:49:18.760 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:18.762 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:49:18.763 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 200 null application/json; charset=utf-8 690.1744ms
2025-04-23 21:49:27.885 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 61
2025-04-23 21:49:27.887 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:49:27.888 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:49:27.891 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:27.892 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:27.893 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:49:27.895 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:27.896 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:49:27.898 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:27.899 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:27.901 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:27.902 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:27.904 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:27.905 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:27.907 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:27.909 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:27.910 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:49:27.911 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:49:27.913 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000A": started reading request body.
2025-04-23 21:49:27.914 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000A": done reading request body.
2025-04-23 21:49:27.915 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:49:27.916 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:27.917 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:27.918 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:27.920 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:27.921 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:49:27.923 +03:00 [INF] Starting to login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:27.926 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:49:27.932 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:49:27.933 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:49:27.934 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:27.936 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:27.937 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:49:27.938 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:49:27.939 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:49:27.941 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:27.944 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:27.946 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:27.947 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:49:27.948 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:27.949 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:49:27.951 +03:00 [INF] Login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:27.952 +03:00 [INF] Token generated for user - vlados_pisos. Token : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NGVjOTUwOC02NzIwLTQ3NGMtODU5OS0zMzMxZTU1YjI4NzgiLCJlbWFpbCI6InN0cmluZ0BtYWlsLmNvbSIsImp0aSI6IjNjOTU2ZmIzLTVkMTQtNGVlNi1hMDYxLTgxZGU3NWJkMzJlNCIsInVuaXF1ZV9uYW1lIjoidmxhZG9zX3Bpc29zIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NTA3NyIsImh0dHA6Ly9sb2NhbGhvc3Q6NDI0NDciXSwiZXhwIjoxNzQ1NDM3NzY3LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjUwNzcifQ.w6autPS8e-DhIm0CXrd2_BCfzzZTJoXwoH-lMJt10M8
2025-04-23 21:49:27.953 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 30.3829ms.
2025-04-23 21:49:27.955 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:49:27.956 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:49:27.957 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 52.3163ms
2025-04-23 21:49:27.959 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:27.960 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:27.961 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:49:27.962 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:27.963 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-23 21:49:27.964 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 200 null application/json; charset=utf-8 79.5739ms
2025-04-23 21:49:29.364 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 61
2025-04-23 21:49:29.367 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:49:29.368 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:49:29.369 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:29.370 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:29.371 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:49:29.372 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:29.373 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:49:29.375 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:29.377 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:29.378 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:29.381 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:29.382 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:29.384 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:29.385 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:29.386 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:29.388 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:49:29.389 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:49:29.391 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000B": started reading request body.
2025-04-23 21:49:29.392 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000B": done reading request body.
2025-04-23 21:49:29.393 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:49:29.394 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:29.396 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:29.397 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:29.398 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:29.399 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:49:29.400 +03:00 [INF] Starting to login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:29.404 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:49:29.407 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:49:29.408 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:49:29.408 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.410 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.411 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:49:29.411 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:49:29.412 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:49:29.413 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:29.415 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:29.417 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.418 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:49:29.419 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.420 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (0ms).
2025-04-23 21:49:29.421 +03:00 [INF] Login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:29.423 +03:00 [INF] Token generated for user - vlados_pisos. Token : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NGVjOTUwOC02NzIwLTQ3NGMtODU5OS0zMzMxZTU1YjI4NzgiLCJlbWFpbCI6InN0cmluZ0BtYWlsLmNvbSIsImp0aSI6ImJjZjczYzlhLWQ4ODMtNDkzMC05NmE3LTdhNGQwNWVhN2VmMyIsInVuaXF1ZV9uYW1lIjoidmxhZG9zX3Bpc29zIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NTA3NyIsImh0dHA6Ly9sb2NhbGhvc3Q6NDI0NDciXSwiZXhwIjoxNzQ1NDM3NzY5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjUwNzcifQ.QHKMlYxHNKe1ivAiChFCWuclOw94OHywSxIzWvD_KtA
2025-04-23 21:49:29.424 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 23.604ms.
2025-04-23 21:49:29.427 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:49:29.428 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:49:29.429 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 44.9278ms
2025-04-23 21:49:29.430 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:29.431 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:29.432 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:49:29.434 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.435 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-04-23 21:49:29.436 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 200 null application/json; charset=utf-8 71.676ms
2025-04-23 21:49:29.845 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 61
2025-04-23 21:49:29.848 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:49:29.849 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:49:29.850 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:29.852 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:29.852 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:49:29.854 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:29.855 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:49:29.856 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:29.858 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:29.859 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:29.860 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:29.861 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:29.862 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:29.863 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:29.864 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:29.865 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:49:29.867 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:49:29.868 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000C": started reading request body.
2025-04-23 21:49:29.869 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000C": done reading request body.
2025-04-23 21:49:29.871 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:49:29.872 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:29.873 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:29.874 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:29.875 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:29.877 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:49:29.878 +03:00 [INF] Starting to login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:29.880 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:49:29.882 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:49:29.883 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:49:29.884 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.885 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.886 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:49:29.887 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:49:29.889 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:49:29.890 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:29.892 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:29.895 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.896 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:49:29.897 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.899 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:49:29.901 +03:00 [INF] Login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:29.902 +03:00 [INF] Token generated for user - vlados_pisos. Token : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NGVjOTUwOC02NzIwLTQ3NGMtODU5OS0zMzMxZTU1YjI4NzgiLCJlbWFpbCI6InN0cmluZ0BtYWlsLmNvbSIsImp0aSI6ImY1ZmFiZjA3LWI3OTAtNDI3My04Njc3LTMyOWVlZWMxMDFlOCIsInVuaXF1ZV9uYW1lIjoidmxhZG9zX3Bpc29zIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NTA3NyIsImh0dHA6Ly9sb2NhbGhvc3Q6NDI0NDciXSwiZXhwIjoxNzQ1NDM3NzY5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjUwNzcifQ.JqtTCQjylW4cu79uWT7BVq6-k1TQT5r5-o1YKwpS3FY
2025-04-23 21:49:29.903 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 25.1847ms.
2025-04-23 21:49:29.905 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:49:29.906 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:49:29.907 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 44.796ms
2025-04-23 21:49:29.908 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:29.909 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:29.910 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:49:29.911 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:29.913 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:49:29.914 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 200 null application/json; charset=utf-8 68.8072ms
2025-04-23 21:49:30.204 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5077/api/Auth/login - application/json 61
2025-04-23 21:49:30.207 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-04-23 21:49:30.208 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-04-23 21:49:30.209 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:30.212 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:30.213 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-04-23 21:49:30.214 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:30.215 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-04-23 21:49:30.217 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:30.218 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:30.220 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:30.221 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:30.223 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:30.224 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:30.226 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-04-23 21:49:30.227 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:30.229 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-04-23 21:49:30.230 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-04-23 21:49:30.231 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000D": started reading request body.
2025-04-23 21:49:30.233 +03:00 [DBG] Connection id "0HNC2ITB9HG5R", Request id "0HNC2ITB9HG5R:0000000D": done reading request body.
2025-04-23 21:49:30.234 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-04-23 21:49:30.235 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:30.236 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:30.237 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-04-23 21:49:30.239 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-04-23 21:49:30.240 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-04-23 21:49:30.241 +03:00 [INF] Starting to login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:30.243 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:49:30.245 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:49:30.246 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:49:30.247 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:30.249 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:30.250 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:49:30.251 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 21:49:30.252 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:49:30.253 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:30.256 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:30.258 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:30.260 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:49:30.261 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:30.262 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (0ms).
2025-04-23 21:49:30.263 +03:00 [INF] Login User: vlados_pisos - Qwerty1488@
2025-04-23 21:49:30.264 +03:00 [INF] Token generated for user - vlados_pisos. Token : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NGVjOTUwOC02NzIwLTQ3NGMtODU5OS0zMzMxZTU1YjI4NzgiLCJlbWFpbCI6InN0cmluZ0BtYWlsLmNvbSIsImp0aSI6IjJhYzEzOTYwLWIzODUtNDNmZC04NDQzLTFmNzY2ZDIxMTE2YiIsInVuaXF1ZV9uYW1lIjoidmxhZG9zX3Bpc29zIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NTA3NyIsImh0dHA6Ly9sb2NhbGhvc3Q6NDI0NDciXSwiZXhwIjoxNzQ1NDM3NzcwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjUwNzcifQ.I-cbYWbuI_cMoAb5ZPM9FmUS-MxUU19VhW0YlZULpj0
2025-04-23 21:49:30.265 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 24.529ms.
2025-04-23 21:49:30.267 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:49:30.268 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:49:30.268 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 44.0868ms
2025-04-23 21:49:30.270 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-04-23 21:49:30.271 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:30.272 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:49:30.274 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:30.275 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:49:30.277 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5077/api/Auth/login - 200 null application/json; charset=utf-8 73.0781ms
2025-04-23 21:49:50.753 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - null null
2025-04-23 21:49:50.755 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:49:50.757 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/vlad'
2025-04-23 21:49:50.759 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:49:50.760 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:49:50.809 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:49:50.811 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:49:50.816 +03:00 [DBG] Authorization was successful.
2025-04-23 21:49:50.816 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:49:50.821 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:49:50.823 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:49:50.824 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:49:50.825 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:49:50.827 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:49:50.828 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:49:50.830 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:49:50.832 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:49:50.954 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:49:50.955 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 21:49:50.957 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 21:49:50.959 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:49:50.960 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 21:49:50.962 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 21:49:50.963 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 21:49:50.965 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 21:49:50.968 +03:00 [INF] Starting to get user info for vlad
2025-04-23 21:49:50.973 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:49:50.974 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-23 21:49:50.975 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:50.977 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:50.978 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:49:50.979 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:49:50.980 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:49:50.981 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:50.983 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 21:49:50.986 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:50.987 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:49:50.988 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:50.990 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:49:51.001 +03:00 [INF] User vlad found
2025-04-23 21:49:51.002 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 36.5973ms.
2025-04-23 21:49:51.004 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 21:49:51.010 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 21:49:51.019 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 189.3692ms
2025-04-23 21:49:51.021 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 21:49:51.022 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:49:51.024 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:49:51.025 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:49:51.027 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:49:51.028 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - 200 null application/json; charset=utf-8 275.4003ms
2025-04-23 21:50:14.250 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5077/api/User/updateUserInfo?Id=64ec9508-6720-474c-8599-3331e55b2878&Username=vlados_pisos1 - null null
2025-04-23 21:50:14.253 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/updateUserInfo'
2025-04-23 21:50:14.254 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)' with route pattern 'api/User/updateUserInfo' is valid for the request path '/api/User/updateUserInfo'
2025-04-23 21:50:14.256 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 21:50:14.257 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:50:14.258 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:50:14.259 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:50:14.262 +03:00 [DBG] Authorization was successful.
2025-04-23 21:50:14.263 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 21:50:14.268 +03:00 [INF] Route matched with {action = "UpdateUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.DTOs.User.ReadUserDto],Microsoft.AspNetCore.Http.HttpResults.ForbidHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] UpdateUserInfo(Application.DTOs.User.UpdateUserDto) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:50:14.270 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:50:14.271 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:50:14.273 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:50:14.275 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:50:14.276 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:50:14.278 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:50:14.279 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:50:14.281 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:50:14.287 +03:00 [DBG] Attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' ...
2025-04-23 21:50:14.290 +03:00 [DBG] Attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' using the name '' in request data ...
2025-04-23 21:50:14.295 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Id' of type 'System.Guid' using the name 'Id' in request data ...
2025-04-23 21:50:14.297 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Id' of type 'System.Guid'.
2025-04-23 21:50:14.299 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Username' of type 'System.String' using the name 'Username' in request data ...
2025-04-23 21:50:14.300 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Username' of type 'System.String'.
2025-04-23 21:50:14.301 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String' using the name 'Email' in request data ...
2025-04-23 21:50:14.303 +03:00 [DBG] Could not find a value in the request with name 'Email' for binding property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String'.
2025-04-23 21:50:14.305 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String'.
2025-04-23 21:50:14.307 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String' using the name 'Password' in request data ...
2025-04-23 21:50:14.308 +03:00 [DBG] Could not find a value in the request with name 'Password' for binding property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String'.
2025-04-23 21:50:14.310 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String'.
2025-04-23 21:50:14.312 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String' using the name 'FirstName' in request data ...
2025-04-23 21:50:14.313 +03:00 [DBG] Could not find a value in the request with name 'FirstName' for binding property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String'.
2025-04-23 21:50:14.315 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String'.
2025-04-23 21:50:14.316 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String' using the name 'LastName' in request data ...
2025-04-23 21:50:14.318 +03:00 [DBG] Could not find a value in the request with name 'LastName' for binding property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String'.
2025-04-23 21:50:14.320 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String'.
2025-04-23 21:50:14.322 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]' using the name 'DateOfBirth' in request data ...
2025-04-23 21:50:14.324 +03:00 [DBG] Could not find a value in the request with name 'DateOfBirth' for binding property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]'.
2025-04-23 21:50:14.326 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]'.
2025-04-23 21:50:14.328 +03:00 [DBG] Done attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 21:50:14.329 +03:00 [DBG] Done attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 21:50:14.330 +03:00 [DBG] Attempting to validate the bound parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' ...
2025-04-23 21:50:14.335 +03:00 [DBG] Done attempting to validate the bound parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 21:50:14.336 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.UpdateUserInfo (API) - Validation state: "Valid"
2025-04-23 21:50:14.339 +03:00 [INF] Starting to update user info for vlados_pisos1
2025-04-23 21:50:14.347 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(e => EF.Property<Guid>(e, "Id") == __id_0)'
2025-04-23 21:50:14.383 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:50:14.390 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:50:14.391 +03:00 [DBG] Created DbConnection. (0ms).
2025-04-23 21:50:14.392 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:50:14.393 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:50:14.394 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:50:14.395 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 21:50:14.397 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 21:50:14.398 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:50:14.402 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:50:14.404 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:50:14.405 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-04-23 21:50:14.407 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:50:14.408 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 21:50:14.421 +03:00 [ERR] Failed to update user info. Message : Error mapping types.

Mapping types:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Type Map configuration:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Destination Member:
Email

AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Type Map configuration:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Destination Member:
Email

 ---> System.ArgumentException: Email address cannot be empty. (Parameter 'address')
   at Domain.ValueObjects.Email..ctor(String address) in C:\Users\User\source\repos\DDD_Messanger\Domain\ValueObjects\Email.cs:line 16
   at lambda_method188(Closure, UpdateUserDto, UserEntity, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method188(Closure, UpdateUserDto, UserEntity, ResolutionContext)
   at Application.UseCases.Users.Data.UpdateUserHandler.Handle(UpdateUserCommand request, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\UseCases\Users\Data\UpdateUserHandler.cs:line 28
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ValidationBehaivor.cs:line 26
   at API.Controllers.Auth.UserController.UpdateUserInfo(UpdateUserDto userDto) in C:\Users\User\source\repos\DDD_Messanger\API\Controllers\Auth\UserController.cs:line 96
2025-04-23 21:50:14.431 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.UpdateUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 93.8551ms.
2025-04-23 21:50:14.433 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:50:14.434 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:50:14.435 +03:00 [INF] Executed action API.Controllers.Auth.UserController.UpdateUserInfo (API) in 156.9975ms
2025-04-23 21:50:14.436 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 21:50:14.437 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" completed keep alive response.
2025-04-23 21:50:14.438 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:50:14.440 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:50:14.441 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 21:50:14.443 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5077/api/User/updateUserInfo?Id=64ec9508-6720-474c-8599-3331e55b2878&Username=vlados_pisos1 - 400 null application/json; charset=utf-8 192.4138ms
2025-04-23 21:51:48.062 +03:00 [INF] Application is shutting down...
2025-04-23 21:51:48.064 +03:00 [DBG] Hosting stopping
2025-04-23 21:51:48.075 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" disconnecting.
2025-04-23 21:51:48.078 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" stopped.
2025-04-23 21:51:48.079 +03:00 [DBG] Connection id "0HNC2ITB9HG5R" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:51:48.085 +03:00 [DBG] Hosting stopped
2025-04-23 21:51:52.255 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 21:51:52.372 +03:00 [DBG] Hosting starting
2025-04-23 21:51:52.388 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 21:51:52.404 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 21:51:52.416 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 21:51:52.428 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 21:51:52.432 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:51:52.437 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 21:51:52.440 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 21:51:52.447 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 21:51:52.450 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 21:51:52.452 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 21:51:52.454 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 21:51:52.503 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 21:51:52.504 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 21:51:52.505 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 21:51:52.506 +03:00 [INF] Hosting environment: Development
2025-04-23 21:51:52.507 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 21:51:52.508 +03:00 [DBG] Hosting started
2025-04-23 21:51:52.921 +03:00 [DBG] Connection id "0HNC2IVKRDCRI" received FIN.
2025-04-23 21:51:52.933 +03:00 [DBG] Connection id "0HNC2IVKRDCRI" accepted.
2025-04-23 21:51:52.935 +03:00 [DBG] Connection id "0HNC2IVKRDCRI" started.
2025-04-23 21:51:52.946 +03:00 [DBG] Connection id "0HNC2IVKRDCRI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:51:52.950 +03:00 [DBG] Connection id "0HNC2IVKRDCRI" disconnecting.
2025-04-23 21:51:52.960 +03:00 [DBG] Connection id "0HNC2IVKRDCRI" stopped.
2025-04-23 21:51:53.036 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" accepted.
2025-04-23 21:51:53.038 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" started.
2025-04-23 21:51:53.318 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 21:51:53.321 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 21:51:53.340 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 21:51:53.342 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:51:53.533 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" completed keep alive response.
2025-04-23 21:51:53.536 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 220.7639ms
2025-04-23 21:51:53.902 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 21:51:53.905 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 21:51:53.906 +03:00 [DBG] Request did not match any endpoints
2025-04-23 21:51:54.041 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" completed keep alive response.
2025-04-23 21:51:54.043 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 140.5273ms
2025-04-23 21:52:21.951 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5077/api/User/updateUserInfo?Id=64ec9508-6720-474c-8599-3331e55b2878&Username=vlados_pisos1 - null null
2025-04-23 21:52:21.959 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/updateUserInfo'
2025-04-23 21:52:21.965 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)' with route pattern 'api/User/updateUserInfo' is valid for the request path '/api/User/updateUserInfo'
2025-04-23 21:52:21.967 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 21:52:21.970 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 21:52:21.972 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 21:52:22.074 +03:00 [DBG] Successfully validated the token.
2025-04-23 21:52:22.076 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 21:52:22.081 +03:00 [DBG] Authorization was successful.
2025-04-23 21:52:22.083 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 21:52:22.108 +03:00 [INF] Route matched with {action = "UpdateUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.DTOs.User.ReadUserDto],Microsoft.AspNetCore.Http.HttpResults.ForbidHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] UpdateUserInfo(Application.DTOs.User.UpdateUserDto) on controller API.Controllers.Auth.UserController (API).
2025-04-23 21:52:22.111 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 21:52:22.112 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 21:52:22.114 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 21:52:22.116 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 21:52:22.118 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 21:52:22.121 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:52:22.242 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 21:52:22.283 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 21:52:22.891 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 21:52:23.063 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 21:52:23.198 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 21:52:23.326 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 21:52:23.335 +03:00 [DBG] Attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' ...
2025-04-23 21:52:23.339 +03:00 [DBG] Attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' using the name '' in request data ...
2025-04-23 21:52:23.345 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Id' of type 'System.Guid' using the name 'Id' in request data ...
2025-04-23 21:52:23.348 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Id' of type 'System.Guid'.
2025-04-23 21:52:23.352 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Username' of type 'System.String' using the name 'Username' in request data ...
2025-04-23 21:52:23.354 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Username' of type 'System.String'.
2025-04-23 21:52:23.356 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String' using the name 'Email' in request data ...
2025-04-23 21:52:23.359 +03:00 [DBG] Could not find a value in the request with name 'Email' for binding property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String'.
2025-04-23 21:52:23.361 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String'.
2025-04-23 21:52:23.362 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String' using the name 'Password' in request data ...
2025-04-23 21:52:23.364 +03:00 [DBG] Could not find a value in the request with name 'Password' for binding property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String'.
2025-04-23 21:52:23.366 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String'.
2025-04-23 21:52:23.368 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String' using the name 'FirstName' in request data ...
2025-04-23 21:52:23.369 +03:00 [DBG] Could not find a value in the request with name 'FirstName' for binding property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String'.
2025-04-23 21:52:23.371 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String'.
2025-04-23 21:52:23.373 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String' using the name 'LastName' in request data ...
2025-04-23 21:52:23.375 +03:00 [DBG] Could not find a value in the request with name 'LastName' for binding property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String'.
2025-04-23 21:52:23.377 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String'.
2025-04-23 21:52:23.379 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]' using the name 'DateOfBirth' in request data ...
2025-04-23 21:52:23.381 +03:00 [DBG] Could not find a value in the request with name 'DateOfBirth' for binding property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]'.
2025-04-23 21:52:23.384 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]'.
2025-04-23 21:52:23.385 +03:00 [DBG] Done attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 21:52:23.387 +03:00 [DBG] Done attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 21:52:23.388 +03:00 [DBG] Attempting to validate the bound parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' ...
2025-04-23 21:52:23.396 +03:00 [DBG] Done attempting to validate the bound parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 21:52:23.406 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.UpdateUserInfo (API) - Validation state: "Valid"
2025-04-23 21:52:23.410 +03:00 [INF] Starting to update user info for vlados_pisos1
2025-04-23 21:52:23.529 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(e => EF.Property<Guid>(e, "Id") == __id_0)'
2025-04-23 21:52:23.989 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 21:52:24.052 +03:00 [DBG] Creating DbConnection.
2025-04-23 21:52:24.087 +03:00 [DBG] Created DbConnection. (30ms).
2025-04-23 21:52:24.093 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:52:24.284 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:52:24.291 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 21:52:24.300 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-23 21:52:24.311 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2025-04-23 21:52:24.324 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:52:24.382 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 21:52:24.424 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:52:24.434 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 42ms reading results.
2025-04-23 21:52:24.442 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:52:24.451 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (9ms).
2025-04-23 21:52:24.487 +03:00 [ERR] Failed to update user info. Message : Error mapping types.

Mapping types:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Type Map configuration:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Destination Member:
Email

AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Type Map configuration:
UpdateUserDto -> UserEntity
Application.DTOs.User.UpdateUserDto -> Domain.Entities.UserEntity

Destination Member:
Email

 ---> System.ArgumentException: Email address cannot be empty. (Parameter 'address')
   at Domain.ValueObjects.Email..ctor(String address) in C:\Users\User\source\repos\DDD_Messanger\Domain\ValueObjects\Email.cs:line 16
   at lambda_method34(Closure, UpdateUserDto, UserEntity, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method34(Closure, UpdateUserDto, UserEntity, ResolutionContext)
   at Application.UseCases.Users.Data.UpdateUserHandler.Handle(UpdateUserCommand request, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\UseCases\Users\Data\UpdateUserHandler.cs:line 28
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\DDD_Messanger\Application\Behaviors\ValidationBehaivor.cs:line 26
   at API.Controllers.Auth.UserController.UpdateUserInfo(UpdateUserDto userDto) in C:\Users\User\source\repos\DDD_Messanger\API\Controllers\Auth\UserController.cs:line 96
2025-04-23 21:52:24.519 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.UpdateUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1105.7599ms.
2025-04-23 21:52:24.530 +03:00 [INF] Setting HTTP status code 400.
2025-04-23 21:52:24.535 +03:00 [INF] Writing value of type 'String' as Json.
2025-04-23 21:52:24.552 +03:00 [INF] Executed action API.Controllers.Auth.UserController.UpdateUserInfo (API) in 2427.8423ms
2025-04-23 21:52:24.555 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 21:52:24.561 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" completed keep alive response.
2025-04-23 21:52:24.567 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 21:52:24.575 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 21:52:24.578 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-23 21:52:24.580 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5077/api/User/updateUserInfo?Id=64ec9508-6720-474c-8599-3331e55b2878&Username=vlados_pisos1 - 400 null application/json; charset=utf-8 2628.6382ms
2025-04-23 21:54:19.691 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" received FIN.
2025-04-23 21:54:19.692 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 21:54:19.693 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" disconnecting.
2025-04-23 21:54:19.696 +03:00 [DBG] Connection id "0HNC2IVKRDCRJ" stopped.
2025-04-23 22:03:01.806 +03:00 [INF] Application is shutting down...
2025-04-23 22:03:01.807 +03:00 [DBG] Hosting stopping
2025-04-23 22:03:01.818 +03:00 [DBG] Hosting stopped
2025-04-23 22:03:12.346 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-04-23 22:03:12.455 +03:00 [DBG] Hosting starting
2025-04-23 22:03:12.469 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-23 22:03:12.482 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-04-23 22:03:12.490 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-04-23 22:03:12.501 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-04-23 22:03:12.506 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 22:03:12.510 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-04-23 22:03:12.512 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-04-23 22:03:12.519 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-04-23 22:03:12.521 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-04-23 22:03:12.523 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-04-23 22:03:12.525 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-04-23 22:03:12.570 +03:00 [INF] Now listening on: http://localhost:5077
2025-04-23 22:03:12.571 +03:00 [DBG] Loaded hosting startup assembly API
2025-04-23 22:03:12.572 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-23 22:03:12.572 +03:00 [INF] Hosting environment: Development
2025-04-23 22:03:12.573 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-04-23 22:03:12.574 +03:00 [DBG] Hosting started
2025-04-23 22:03:12.972 +03:00 [DBG] Connection id "0HNC2J5VGSGV0" received FIN.
2025-04-23 22:03:12.982 +03:00 [DBG] Connection id "0HNC2J5VGSGV0" accepted.
2025-04-23 22:03:12.984 +03:00 [DBG] Connection id "0HNC2J5VGSGV0" started.
2025-04-23 22:03:12.993 +03:00 [DBG] Connection id "0HNC2J5VGSGV0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 22:03:13.000 +03:00 [DBG] Connection id "0HNC2J5VGSGV0" disconnecting.
2025-04-23 22:03:13.008 +03:00 [DBG] Connection id "0HNC2J5VGSGV0" stopped.
2025-04-23 22:03:13.103 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" accepted.
2025-04-23 22:03:13.105 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" started.
2025-04-23 22:03:13.189 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/index.html - null null
2025-04-23 22:03:13.193 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-04-23 22:03:13.212 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-04-23 22:03:13.214 +03:00 [DBG] Request did not match any endpoints
2025-04-23 22:03:13.381 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" completed keep alive response.
2025-04-23 22:03:13.384 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/index.html - 200 null text/html;charset=utf-8 196.3699ms
2025-04-23 22:03:13.526 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - null null
2025-04-23 22:03:13.529 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-04-23 22:03:13.530 +03:00 [DBG] Request did not match any endpoints
2025-04-23 22:03:13.651 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" completed keep alive response.
2025-04-23 22:03:13.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.2258ms
2025-04-23 22:03:40.066 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - null null
2025-04-23 22:03:40.073 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/getUserInfo/vlad'
2025-04-23 22:03:40.079 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)' with route pattern 'api/User/getUserInfo/{username}' is valid for the request path '/api/User/getUserInfo/vlad'
2025-04-23 22:03:40.081 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 22:03:40.084 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 22:03:40.086 +03:00 [WRN] Failed to determine the https port for redirect.
2025-04-23 22:03:40.184 +03:00 [DBG] Successfully validated the token.
2025-04-23 22:03:40.186 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 22:03:40.191 +03:00 [DBG] Authorization was successful.
2025-04-23 22:03:40.192 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 22:03:40.219 +03:00 [INF] Route matched with {action = "GetUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.Interfaces.DTOs.IReadUserDto],Microsoft.AspNetCore.Http.HttpResults.UnauthorizedHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] GetUserInfo(System.String) on controller API.Controllers.Auth.UserController (API).
2025-04-23 22:03:40.222 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 22:03:40.224 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 22:03:40.226 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 22:03:40.229 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 22:03:40.231 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 22:03:40.234 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 22:03:40.359 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-04-23 22:03:40.400 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration added for 'Proxies:UseLazyLoadingProxies', configuration added for 'Proxies:UseChangeTrackingProxies'.
2025-04-23 22:03:41.023 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-04-23 22:03:41.202 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-04-23 22:03:41.335 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 22:03:41.465 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 22:03:41.470 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2025-04-23 22:03:41.473 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2025-04-23 22:03:41.475 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 22:03:41.477 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2025-04-23 22:03:41.478 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2025-04-23 22:03:41.483 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2025-04-23 22:03:41.495 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.GetUserInfo (API) - Validation state: "Valid"
2025-04-23 22:03:41.498 +03:00 [INF] Starting to get user info for vlad
2025-04-23 22:03:41.631 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(o => o.Username.Equals(__userName_0))'
2025-04-23 22:03:42.108 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 22:03:42.190 +03:00 [DBG] Creating DbConnection.
2025-04-23 22:03:42.229 +03:00 [DBG] Created DbConnection. (34ms).
2025-04-23 22:03:42.235 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:03:42.448 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:03:42.455 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 22:03:42.465 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-04-23 22:03:42.478 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (23ms).
2025-04-23 22:03:42.489 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 22:03:42.562 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-04-23 22:03:42.607 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:03:42.619 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 44ms reading results.
2025-04-23 22:03:42.625 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:03:42.636 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (10ms).
2025-04-23 22:03:42.657 +03:00 [INF] User vlad found
2025-04-23 22:03:42.668 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.GetUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 1165.4051ms.
2025-04-23 22:03:42.684 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 22:03:42.696 +03:00 [INF] Writing value of type 'ReadUserPublicDto' as Json.
2025-04-23 22:03:42.731 +03:00 [INF] Executed action API.Controllers.Auth.UserController.GetUserInfo (API) in 2492.5286ms
2025-04-23 22:03:42.734 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.GetUserInfo (API)'
2025-04-23 22:03:42.741 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" completed keep alive response.
2025-04-23 22:03:42.749 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 22:03:42.758 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:03:42.762 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-04-23 22:03:42.765 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5077/api/User/getUserInfo/vlad - 200 null application/json; charset=utf-8 2698.7447ms
2025-04-23 22:04:00.819 +03:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5077/api/User/updateUserInfo?Id=64ec9508-6720-474c-8599-3331e55b2878&Username=vlados_pisos1 - null null
2025-04-23 22:04:00.823 +03:00 [DBG] 1 candidate(s) found for the request path '/api/User/updateUserInfo'
2025-04-23 22:04:00.823 +03:00 [DBG] Endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)' with route pattern 'api/User/updateUserInfo' is valid for the request path '/api/User/updateUserInfo'
2025-04-23 22:04:00.825 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 22:04:00.826 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-04-23 22:04:00.828 +03:00 [DBG] Successfully validated the token.
2025-04-23 22:04:00.829 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-04-23 22:04:00.831 +03:00 [DBG] Authorization was successful.
2025-04-23 22:04:00.832 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 22:04:00.839 +03:00 [INF] Route matched with {action = "UpdateUserInfo", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`3[Microsoft.AspNetCore.Http.HttpResults.Ok`1[Application.DTOs.User.ReadUserDto],Microsoft.AspNetCore.Http.HttpResults.ForbidHttpResult,Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] UpdateUserInfo(Application.DTOs.User.UpdateUserDto) on controller API.Controllers.Auth.UserController (API).
2025-04-23 22:04:00.840 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-04-23 22:04:00.841 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-04-23 22:04:00.842 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-04-23 22:04:00.844 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-04-23 22:04:00.845 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-04-23 22:04:00.847 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 22:04:00.910 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-04-23 22:04:00.913 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.UserController (API)
2025-04-23 22:04:00.919 +03:00 [DBG] Attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' ...
2025-04-23 22:04:00.921 +03:00 [DBG] Attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' using the name '' in request data ...
2025-04-23 22:04:00.925 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Id' of type 'System.Guid' using the name 'Id' in request data ...
2025-04-23 22:04:00.927 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Id' of type 'System.Guid'.
2025-04-23 22:04:00.929 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Username' of type 'System.String' using the name 'Username' in request data ...
2025-04-23 22:04:00.931 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Username' of type 'System.String'.
2025-04-23 22:04:00.933 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String' using the name 'Email' in request data ...
2025-04-23 22:04:00.935 +03:00 [DBG] Could not find a value in the request with name 'Email' for binding property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String'.
2025-04-23 22:04:00.936 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Email' of type 'System.String'.
2025-04-23 22:04:00.937 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String' using the name 'Password' in request data ...
2025-04-23 22:04:00.938 +03:00 [DBG] Could not find a value in the request with name 'Password' for binding property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String'.
2025-04-23 22:04:00.940 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.Password' of type 'System.String'.
2025-04-23 22:04:00.941 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String' using the name 'FirstName' in request data ...
2025-04-23 22:04:00.942 +03:00 [DBG] Could not find a value in the request with name 'FirstName' for binding property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String'.
2025-04-23 22:04:00.943 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.FirstName' of type 'System.String'.
2025-04-23 22:04:00.945 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String' using the name 'LastName' in request data ...
2025-04-23 22:04:00.947 +03:00 [DBG] Could not find a value in the request with name 'LastName' for binding property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String'.
2025-04-23 22:04:00.948 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.LastName' of type 'System.String'.
2025-04-23 22:04:00.950 +03:00 [DBG] Attempting to bind property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]' using the name 'DateOfBirth' in request data ...
2025-04-23 22:04:00.951 +03:00 [DBG] Could not find a value in the request with name 'DateOfBirth' for binding property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]'.
2025-04-23 22:04:00.953 +03:00 [DBG] Done attempting to bind property 'Application.DTOs.User.UpdateUserDto.DateOfBirth' of type 'System.Nullable`1[System.DateTime]'.
2025-04-23 22:04:00.954 +03:00 [DBG] Done attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 22:04:00.956 +03:00 [DBG] Done attempting to bind parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 22:04:00.956 +03:00 [DBG] Attempting to validate the bound parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto' ...
2025-04-23 22:04:00.960 +03:00 [DBG] Done attempting to validate the bound parameter 'userDto' of type 'Application.DTOs.User.UpdateUserDto'.
2025-04-23 22:04:00.962 +03:00 [INF] Executing action method API.Controllers.Auth.UserController.UpdateUserInfo (API) - Validation state: "Valid"
2025-04-23 22:04:00.964 +03:00 [INF] Starting to update user info for vlados_pisos1
2025-04-23 22:04:00.971 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(e => EF.Property<Guid>(e, "Id") == __id_0)'
2025-04-23 22:04:01.004 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 22:04:01.010 +03:00 [DBG] Creating DbConnection.
2025-04-23 22:04:01.012 +03:00 [DBG] Created DbConnection. (1ms).
2025-04-23 22:04:01.013 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.016 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.018 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 22:04:01.019 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 22:04:01.020 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 22:04:01.022 +03:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 22:04:01.026 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-04-23 22:04:01.031 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.032 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 2ms reading results.
2025-04-23 22:04:01.033 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.034 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 22:04:01.040 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .FirstOrDefault(x => x.Id == __entity_Id_0)'
2025-04-23 22:04:01.050 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__entity_Id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Id == @__entity_Id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: UserEntity.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (UserEntity)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-04-23 22:04:01.055 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.057 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 22:04:01.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-04-23 22:04:01.060 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 22:04:01.062 +03:00 [DBG] Executing DbCommand [Parameters=[@__entity_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__entity_Id_0
2025-04-23 22:04:01.064 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__entity_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__entity_Id_0
2025-04-23 22:04:01.110 +03:00 [DBG] Context 'MessengerDbContext' started tracking 'UserEntity' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-23 22:04:01.148 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.151 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 84ms reading results.
2025-04-23 22:04:01.153 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.155 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 22:04:01.209 +03:00 [DBG] An entity of type 'UserEntity' tracked by 'MessengerDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-23 22:04:01.220 +03:00 [DBG] SaveChanges starting for 'MessengerDbContext'.
2025-04-23 22:04:01.225 +03:00 [DBG] DetectChanges starting for 'MessengerDbContext'.
2025-04-23 22:04:01.231 +03:00 [DBG] DetectChanges completed for 'MessengerDbContext'.
2025-04-23 22:04:01.332 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.333 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.337 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-04-23 22:04:01.338 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-04-23 22:04:01.340 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-04-23 22:04:01.341 +03:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Date), @p1='?' (Size = 450), @p2='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [DateOfBirth] = @p0, [Email] = @p1, [Username] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-04-23 22:04:01.346 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Date), @p1='?' (Size = 450), @p2='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [DateOfBirth] = @p0, [Email] = @p1, [Username] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-04-23 22:04:01.354 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.356 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 7ms reading results.
2025-04-23 22:04:01.358 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.359 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-04-23 22:04:01.367 +03:00 [DBG] An entity of type 'UserEntity' tracked by 'MessengerDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-04-23 22:04:01.372 +03:00 [DBG] SaveChanges completed for 'MessengerDbContext' with 1 entities written to the database.
2025-04-23 22:04:01.378 +03:00 [INF] User vlados_pisos1 updated
2025-04-23 22:04:01.379 +03:00 [INF] Executed action method API.Controllers.Auth.UserController.UpdateUserInfo (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 416.6204ms.
2025-04-23 22:04:01.381 +03:00 [INF] Setting HTTP status code 200.
2025-04-23 22:04:01.388 +03:00 [INF] Writing value of type 'ReadUserDto' as Json.
2025-04-23 22:04:01.395 +03:00 [INF] Executed action API.Controllers.Auth.UserController.UpdateUserInfo (API) in 548.6652ms
2025-04-23 22:04:01.397 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.UserController.UpdateUserInfo (API)'
2025-04-23 22:04:01.398 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" completed keep alive response.
2025-04-23 22:04:01.399 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-04-23 22:04:01.401 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-04-23 22:04:01.402 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-04-23 22:04:01.403 +03:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5077/api/User/updateUserInfo?Id=64ec9508-6720-474c-8599-3331e55b2878&Username=vlados_pisos1 - 200 null application/json; charset=utf-8 583.5443ms
2025-04-23 22:05:57.160 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" received FIN.
2025-04-23 22:05:57.161 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-04-23 22:05:57.162 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" disconnecting.
2025-04-23 22:05:57.165 +03:00 [DBG] Connection id "0HNC2J5VGSGV1" stopped.
2025-04-23 22:09:36.406 +03:00 [INF] Application is shutting down...
2025-04-23 22:09:36.407 +03:00 [DBG] Hosting stopping
2025-04-23 22:09:36.419 +03:00 [DBG] Hosting stopped
