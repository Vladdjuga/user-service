2025-05-16 21:12:12.050 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-16 21:12:12.219 +03:00 [DBG] Hosting starting
2025-05-16 21:12:12.250 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 21:12:12.278 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-16 21:12:12.327 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-16 21:12:12.343 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-16 21:12:12.348 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 21:12:12.355 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-16 21:12:12.357 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 21:12:12.365 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-16 21:12:12.369 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-16 21:12:12.374 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-16 21:12:12.378 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-16 21:12:12.485 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-16 21:12:12.490 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-16 21:12:12.492 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-16 21:12:12.494 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 21:12:12.496 +03:00 [INF] Hosting environment: Development
2025-05-16 21:12:12.500 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-16 21:12:12.505 +03:00 [DBG] Hosting started
2025-05-16 22:31:15.802 +03:00 [DBG] Connection id "0HNCKM0SPJUC5" accepted.
2025-05-16 22:31:15.805 +03:00 [DBG] Connection id "0HNCKM0SPJUC5" started.
2025-05-16 22:31:28.520 +03:00 [DBG] Connection id "0HNCKM0SPJUC5" reset.
2025-05-16 22:31:28.530 +03:00 [DBG] Connection id "0HNCKM0SPJUC5" is closed. The last processed stream ID was 0.
2025-05-16 22:31:28.529 +03:00 [DBG] The connection queue processing loop for 0HNCKM0SPJUC5 completed.
2025-05-16 22:31:28.533 +03:00 [DBG] Connection id "0HNCKM0SPJUC5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:31:28.554 +03:00 [DBG] Connection id "0HNCKM0SPJUC5" stopped.
2025-05-16 22:38:38.660 +03:00 [DBG] Connection id "0HNCKM0SPJUC6" accepted.
2025-05-16 22:38:38.661 +03:00 [DBG] Connection id "0HNCKM0SPJUC6" started.
2025-05-16 22:39:20.576 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" accepted.
2025-05-16 22:39:20.577 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" started.
2025-05-16 22:39:20.578 +03:00 [DBG] Connection id "0HNCKM0SPJUC8" accepted.
2025-05-16 22:39:20.579 +03:00 [DBG] Connection id "0HNCKM0SPJUC8" started.
2025-05-16 22:39:20.634 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger - null null
2025-05-16 22:39:20.639 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-16 22:39:20.664 +03:00 [DBG] No candidates found for the request path '/swagger'
2025-05-16 22:39:20.665 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:20.696 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" completed keep alive response.
2025-05-16 22:39:20.700 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger - 301 0 null 68.0159ms
2025-05-16 22:39:20.720 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/index.html - null null
2025-05-16 22:39:20.722 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-05-16 22:39:20.723 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:20.915 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" completed keep alive response.
2025-05-16 22:39:20.917 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/index.html - 200 null text/html;charset=utf-8 196.4552ms
2025-05-16 22:39:20.977 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui.css - null null
2025-05-16 22:39:20.980 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-05-16 22:39:20.982 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:21.009 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-16 22:39:21.015 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" completed keep alive response.
2025-05-16 22:39:21.017 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui.css - 200 143943 text/css 39.7025ms
2025-05-16 22:39:21.172 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-bundle.js - null null
2025-05-16 22:39:21.174 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-05-16 22:39:21.175 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:21.223 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-standalone-preset.js - null null
2025-05-16 22:39:21.226 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-05-16 22:39:21.231 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:21.245 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-16 22:39:21.245 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-16 22:39:21.247 +03:00 [DBG] Connection id "0HNCKM0SPJUC8" completed keep alive response.
2025-05-16 22:39:21.248 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" completed keep alive response.
2025-05-16 22:39:21.250 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 78.6662ms
2025-05-16 22:39:21.251 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 28.4507ms
2025-05-16 22:39:21.862 +03:00 [DBG] Connection id "0HNCKM0SPJUC9" accepted.
2025-05-16 22:39:21.863 +03:00 [DBG] Connection id "0HNCKM0SPJUC9" started.
2025-05-16 22:39:21.866 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-bundle.js - null null
2025-05-16 22:39:21.868 +03:00 [DBG] Connection id "0HNCKM0SPJUCA" accepted.
2025-05-16 22:39:21.869 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-05-16 22:39:21.870 +03:00 [DBG] Connection id "0HNCKM0SPJUCA" started.
2025-05-16 22:39:21.871 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:21.872 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-standalone-preset.js - null null
2025-05-16 22:39:21.877 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-05-16 22:39:21.877 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-05-16 22:39:21.879 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:21.881 +03:00 [DBG] Connection id "0HNCKM0SPJUC9" completed keep alive response.
2025-05-16 22:39:21.884 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 18.678ms
2025-05-16 22:39:21.885 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-16 22:39:21.892 +03:00 [DBG] Connection id "0HNCKM0SPJUCA" completed keep alive response.
2025-05-16 22:39:21.893 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 21.2769ms
2025-05-16 22:39:21.964 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/v1/swagger.json - null null
2025-05-16 22:39:21.967 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-05-16 22:39:21.968 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:22.025 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/swagger/favicon-32x32.png - null null
2025-05-16 22:39:22.028 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-05-16 22:39:22.029 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:39:22.031 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-05-16 22:39:22.033 +03:00 [DBG] Connection id "0HNCKM0SPJUC8" completed keep alive response.
2025-05-16 22:39:22.034 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/favicon-32x32.png - 200 628 image/png 9.0227ms
2025-05-16 22:39:22.174 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" completed keep alive response.
2025-05-16 22:39:22.176 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.6344ms
2025-05-16 22:39:30.478 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7001/api/Auth/login - application/json 51
2025-05-16 22:39:30.487 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-05-16 22:39:30.493 +03:00 [DBG] Endpoint 'API.Controllers.Auth.AuthController.Login (API)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-05-16 22:39:30.494 +03:00 [DBG] Request matched endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-16 22:39:30.496 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-16 22:39:30.541 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-16 22:39:30.545 +03:00 [INF] Executing endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-16 22:39:30.571 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Http.HttpResults.Results`2[Microsoft.AspNetCore.Http.HttpResults.Ok`1[System.String],Microsoft.AspNetCore.Http.HttpResults.BadRequest`1[System.String]]] Login(Application.DTOs.User.LoginUserDto) on controller API.Controllers.Auth.AuthController (API).
2025-05-16 22:39:30.574 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-05-16 22:39:30.575 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-05-16 22:39:30.576 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-05-16 22:39:30.578 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-05-16 22:39:30.579 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2025-05-16 22:39:30.582 +03:00 [DBG] Executing controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-16 22:39:30.583 +03:00 [DBG] Executed controller factory for controller API.Controllers.Auth.AuthController (API)
2025-05-16 22:39:30.591 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-16 22:39:30.594 +03:00 [DBG] Attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' using the name '' in request data ...
2025-05-16 22:39:30.596 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-05-16 22:39:30.605 +03:00 [DBG] Connection id "0HNCKM0SPJUC7", Request id "0HNCKM0SPJUC7:00000006": started reading request body.
2025-05-16 22:39:30.606 +03:00 [DBG] Connection id "0HNCKM0SPJUC7", Request id "0HNCKM0SPJUC7:00000006": done reading request body.
2025-05-16 22:39:30.627 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'Application.DTOs.User.LoginUserDto'
2025-05-16 22:39:30.628 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-16 22:39:30.630 +03:00 [DBG] Done attempting to bind parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-16 22:39:30.631 +03:00 [DBG] Attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto' ...
2025-05-16 22:39:30.638 +03:00 [DBG] Done attempting to validate the bound parameter 'loginDto' of type 'Application.DTOs.User.LoginUserDto'.
2025-05-16 22:39:30.653 +03:00 [INF] Executing action method API.Controllers.Auth.AuthController.Login (API) - Validation state: "Valid"
2025-05-16 22:39:30.659 +03:00 [INF] Starting to login User: admin - admin123
2025-05-16 22:39:30.880 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-16 22:39:31.343 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:39:31.389 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:39:31.521 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:39:31.629 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:39:31.632 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:39:31.677 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-05-16 22:39:31.679 +03:00 [DBG] The index {'UserId'} was not created on entity type 'UserContactEntity' as the properties are already covered by the index {'UserId', 'ContactId'}.
2025-05-16 22:39:31.877 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-05-16 22:39:32.057 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-16 22:39:32.163 +03:00 [DBG] Compiling query expression: 
'DbSet<UserEntity>()
    .AsNoTracking()
    .FirstOrDefault(o => o.Username.Equals(__userName_0))'
2025-05-16 22:39:32.650 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<UserEntity>(
    asyncEnumerable: SingleQueryingEnumerable.Create<UserEntity>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserEntity.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: UserEntity.DateOfBirth (DateTime) Required, 2], [Property: UserEntity.Email (Email) Required Index, 3], [Property: UserEntity.FirstName (string) Required MaxLength(50), 4], [Property: UserEntity.LastName (string) Required MaxLength(50), 5], [Property: UserEntity.PasswordHash (string) Required MaxLength(255), 6], [Property: UserEntity.Username (string) Required Index MaxLength(50), 7] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.DateOfBirth, u.Email, u.FirstName, u.LastName, u.PasswordHash, u.Username
            FROM Users AS u
            WHERE u.Username == @__userName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            UserEntity entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                UserEntity instance1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(UserEntity);
                (object)dataReader.GetGuid(0) != null ? 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]: 
                            {
                                return (UserEntity)
                                {
                                    UserEntityProxy instance;
                                    DbContext namelessParameter{2};
                                    IEntityType namelessParameter{3};
                                    ILazyLoader namelessParameter{4};
                                    namelessParameter{2} = materializationContext1.Context;
                                    namelessParameter{3} = (IEntityType)ParameterBindingInfo.StructuralType;
                                    namelessParameter{4} = InfrastructureExtensions.GetService<ILazyLoader>((IInfrastructure<IServiceProvider>)materializationContext1.Context);
                                    instance = (UserEntityProxy)ProxyFactory.CreateLazyLoadingProxy(
                                        context: namelessParameter{2}, 
                                        entityType: namelessParameter{3}, 
                                        loader: namelessParameter{4}, 
                                        constructorArguments: new object[]{ });
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                    instance.<DateOfBirth>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<Email>k__BackingField = Invoke(((ValueConverter<Email, string>)((IReadOnlyProperty)[LIFTABLE Constant: Property: UserEntity.Email (Email) Required Index | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindProperty("Email")]).GetTypeMapping().Converter).ConvertFromProviderTyped, dataReader.GetString(3));
                                    instance.<FirstName>k__BackingField = dataReader.GetString(4);
                                    instance.<LastName>k__BackingField = dataReader.GetString(5);
                                    instance.<PasswordHash>k__BackingField = dataReader.GetString(6);
                                    instance.<Username>k__BackingField = dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{2} is IInjectableService) ? ((IInjectableService)namelessParameter{2}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{3} is IInjectableService) ? ((IInjectableService)namelessParameter{3}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    (namelessParameter{4} is IInjectableService) ? ((IInjectableService)namelessParameter{4}).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: NoTracking, 
                                        structuralType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")]) : default(void);
                                    return instance;
                                };
                            }
                        default: 
                            default(UserEntity)
                    }
                    ;
                    return instance1;
                } : 
                {
                    object[] keyValues1;
                    keyValues1 = new object[]{ (object)dataReader.GetGuid(0) };
                    return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                        entityType: [LIFTABLE Constant: EntityType: UserEntity | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity")], 
                        properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: UserEntity.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd } | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserEntity").FindPrimaryKey().Properties], 
                        keyValues: keyValues1);
                };
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-16 22:39:32.723 +03:00 [DBG] Creating DbConnection.
2025-05-16 22:39:32.759 +03:00 [DBG] Created DbConnection. (30ms).
2025-05-16 22:39:32.765 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:39:34.078 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:39:34.086 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-16 22:39:34.093 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2025-05-16 22:39:34.106 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-05-16 22:39:34.117 +03:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-05-16 22:39:34.180 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__userName_0
2025-05-16 22:39:34.226 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:39:34.236 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 46ms reading results.
2025-05-16 22:39:34.245 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:39:34.256 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (11ms).
2025-05-16 22:39:34.299 +03:00 [INF] Login User: admin - admin123
2025-05-16 22:39:34.300 +03:00 [INF] Token generated for user - admin. Token : Application.Common.Result`1[System.String]
2025-05-16 22:39:34.308 +03:00 [INF] Executed action method API.Controllers.Auth.AuthController.Login (API), returned result Microsoft.AspNetCore.Mvc.HttpActionResult in 3647.7139ms.
2025-05-16 22:39:34.317 +03:00 [INF] Setting HTTP status code 200.
2025-05-16 22:39:34.319 +03:00 [INF] Writing value of type 'String' as Json.
2025-05-16 22:39:34.336 +03:00 [INF] Executed action API.Controllers.Auth.AuthController.Login (API) in 3750.2484ms
2025-05-16 22:39:34.339 +03:00 [INF] Executed endpoint 'API.Controllers.Auth.AuthController.Login (API)'
2025-05-16 22:39:34.343 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" completed keep alive response.
2025-05-16 22:39:34.348 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-16 22:39:34.356 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:39:34.358 +03:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-05-16 22:39:34.362 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7001/api/Auth/login - 200 null application/json; charset=utf-8 3883.8533ms
2025-05-16 22:40:10.698 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 22:40:10.699 +03:00 [DBG] No candidates found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:40:10.700 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:40:10.701 +03:00 [DBG] POST requests are not supported
2025-05-16 22:40:10.703 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-16 22:40:10.705 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 404 0 null 6.9353ms
2025-05-16 22:40:10.709 +03:00 [DBG] Connection id "0HNCKM0SPJUC6" reset.
2025-05-16 22:40:10.709 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7000/chat.ChatService/UserChatExists, Response status code: 404
2025-05-16 22:40:10.711 +03:00 [DBG] Connection id "0HNCKM0SPJUC6" is closed. The last processed stream ID was 1.
2025-05-16 22:40:10.714 +03:00 [DBG] The connection queue processing loop for 0HNCKM0SPJUC6 completed.
2025-05-16 22:40:10.715 +03:00 [DBG] Connection id "0HNCKM0SPJUC6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:40:10.722 +03:00 [DBG] Connection id "0HNCKM0SPJUC6" stopped.
2025-05-16 22:41:33.129 +03:00 [DBG] Connection id "0HNCKM0SPJUC9" disconnecting.
2025-05-16 22:41:33.129 +03:00 [DBG] Connection id "0HNCKM0SPJUCA" disconnecting.
2025-05-16 22:41:33.131 +03:00 [DBG] Connection id "0HNCKM0SPJUCA" stopped.
2025-05-16 22:41:33.130 +03:00 [DBG] Connection id "0HNCKM0SPJUC9" stopped.
2025-05-16 22:41:33.129 +03:00 [DBG] Connection id "0HNCKM0SPJUC8" disconnecting.
2025-05-16 22:41:33.132 +03:00 [DBG] Connection id "0HNCKM0SPJUCA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:41:33.133 +03:00 [DBG] Connection id "0HNCKM0SPJUC9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:41:33.134 +03:00 [DBG] Connection id "0HNCKM0SPJUC8" stopped.
2025-05-16 22:41:33.137 +03:00 [DBG] Connection id "0HNCKM0SPJUC8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:41:45.262 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" disconnecting.
2025-05-16 22:41:45.263 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" stopped.
2025-05-16 22:41:45.264 +03:00 [DBG] Connection id "0HNCKM0SPJUC7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:41:51.720 +03:00 [DBG] Connection id "0HNCKM0SPJUCB" accepted.
2025-05-16 22:41:51.721 +03:00 [DBG] Connection id "0HNCKM0SPJUCB" started.
2025-05-16 22:41:55.448 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 22:41:55.451 +03:00 [DBG] No candidates found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:41:55.452 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:41:55.452 +03:00 [DBG] POST requests are not supported
2025-05-16 22:41:55.456 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-16 22:41:55.457 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 404 0 null 8.656ms
2025-05-16 22:41:55.459 +03:00 [DBG] Connection id "0HNCKM0SPJUCB" reset.
2025-05-16 22:41:55.461 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7000/chat.ChatService/UserChatExists, Response status code: 404
2025-05-16 22:41:55.462 +03:00 [DBG] Connection id "0HNCKM0SPJUCB" is closed. The last processed stream ID was 1.
2025-05-16 22:41:55.466 +03:00 [DBG] The connection queue processing loop for 0HNCKM0SPJUCB completed.
2025-05-16 22:41:55.467 +03:00 [DBG] Connection id "0HNCKM0SPJUCB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:41:55.478 +03:00 [DBG] Connection id "0HNCKM0SPJUCB" stopped.
2025-05-16 22:42:02.908 +03:00 [INF] Application is shutting down...
2025-05-16 22:42:02.910 +03:00 [DBG] Hosting stopping
2025-05-16 22:42:02.923 +03:00 [DBG] Hosting stopped
2025-05-16 22:42:10.161 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-16 22:42:10.294 +03:00 [DBG] Hosting starting
2025-05-16 22:42:10.310 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 22:42:10.329 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-16 22:42:10.339 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-16 22:42:10.354 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-16 22:42:10.360 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:42:10.365 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-16 22:42:10.368 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:42:10.377 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-16 22:42:10.381 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-16 22:42:10.383 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-16 22:42:10.385 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-16 22:42:10.447 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-16 22:42:10.449 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-16 22:42:10.450 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-16 22:42:10.452 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 22:42:10.452 +03:00 [INF] Hosting environment: Development
2025-05-16 22:42:10.454 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-16 22:42:10.455 +03:00 [DBG] Hosting started
2025-05-16 22:42:19.279 +03:00 [DBG] Connection id "0HNCKM72H0TBG" accepted.
2025-05-16 22:42:19.282 +03:00 [DBG] Connection id "0HNCKM72H0TBG" started.
2025-05-16 22:42:27.145 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 22:42:27.150 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-16 22:42:27.168 +03:00 [DBG] No candidates found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:42:27.170 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:42:27.193 +03:00 [DBG] POST requests are not supported
2025-05-16 22:42:27.228 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-16 22:42:27.236 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 404 0 null 92.1278ms
2025-05-16 22:42:27.240 +03:00 [DBG] Connection id "0HNCKM72H0TBG" reset.
2025-05-16 22:42:27.248 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7000/chat.ChatService/UserChatExists, Response status code: 404
2025-05-16 22:42:27.253 +03:00 [DBG] The connection queue processing loop for 0HNCKM72H0TBG completed.
2025-05-16 22:42:27.253 +03:00 [DBG] Connection id "0HNCKM72H0TBG" is closed. The last processed stream ID was 1.
2025-05-16 22:42:27.256 +03:00 [DBG] Connection id "0HNCKM72H0TBG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:42:27.266 +03:00 [DBG] Connection id "0HNCKM72H0TBG" stopped.
2025-05-16 22:43:04.450 +03:00 [INF] Application is shutting down...
2025-05-16 22:43:04.451 +03:00 [DBG] Hosting stopping
2025-05-16 22:43:04.464 +03:00 [DBG] Hosting stopped
2025-05-16 22:43:09.755 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-16 22:43:09.898 +03:00 [DBG] Hosting starting
2025-05-16 22:43:09.914 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 22:43:09.929 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-16 22:43:09.942 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-16 22:43:09.954 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-16 22:43:09.960 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:43:09.966 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-16 22:43:09.968 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:43:09.976 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-16 22:43:09.979 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-16 22:43:09.982 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-16 22:43:09.985 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-16 22:43:10.051 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-16 22:43:10.054 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-16 22:43:10.055 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-16 22:43:10.057 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 22:43:10.057 +03:00 [INF] Hosting environment: Development
2025-05-16 22:43:10.059 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-16 22:43:10.060 +03:00 [DBG] Hosting started
2025-05-16 22:43:20.619 +03:00 [DBG] Connection id "0HNCKM7KQ0DFE" accepted.
2025-05-16 22:43:20.622 +03:00 [DBG] Connection id "0HNCKM7KQ0DFE" started.
2025-05-16 22:43:29.147 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 22:43:29.151 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-16 22:43:29.171 +03:00 [DBG] No candidates found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:43:29.174 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:43:29.194 +03:00 [DBG] POST requests are not supported
2025-05-16 22:43:29.229 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-16 22:43:29.235 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 404 0 null 89.4579ms
2025-05-16 22:43:29.238 +03:00 [DBG] Connection id "0HNCKM7KQ0DFE" reset.
2025-05-16 22:43:29.246 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7000/chat.ChatService/UserChatExists, Response status code: 404
2025-05-16 22:43:29.255 +03:00 [DBG] Connection id "0HNCKM7KQ0DFE" is closed. The last processed stream ID was 1.
2025-05-16 22:43:29.255 +03:00 [DBG] The connection queue processing loop for 0HNCKM7KQ0DFE completed.
2025-05-16 22:43:29.257 +03:00 [DBG] Connection id "0HNCKM7KQ0DFE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:43:29.264 +03:00 [DBG] Connection id "0HNCKM7KQ0DFE" stopped.
2025-05-16 22:45:33.480 +03:00 [INF] Application is shutting down...
2025-05-16 22:45:33.482 +03:00 [DBG] Hosting stopping
2025-05-16 22:45:33.493 +03:00 [DBG] Hosting stopped
2025-05-16 22:45:36.760 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-16 22:45:36.909 +03:00 [DBG] Hosting starting
2025-05-16 22:45:36.924 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 22:45:36.940 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-16 22:45:36.950 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-16 22:45:36.961 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-16 22:45:36.966 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:45:36.976 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-16 22:45:36.979 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:45:36.987 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-16 22:45:36.989 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-16 22:45:36.992 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-16 22:45:36.993 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-16 22:45:37.056 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-16 22:45:37.058 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-16 22:45:37.060 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-16 22:45:37.062 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 22:45:37.064 +03:00 [INF] Hosting environment: Development
2025-05-16 22:45:37.065 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-16 22:45:37.066 +03:00 [DBG] Hosting started
2025-05-16 22:46:12.462 +03:00 [DBG] Connection id "0HNCKM980QOS4" accepted.
2025-05-16 22:46:12.464 +03:00 [DBG] Connection id "0HNCKM980QOS4" started.
2025-05-16 22:46:28.924 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 22:46:28.929 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-16 22:46:28.947 +03:00 [DBG] No candidates found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:46:28.949 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:46:28.967 +03:00 [DBG] POST requests are not supported
2025-05-16 22:46:29.074 +03:00 [DBG] Successfully validated the token.
2025-05-16 22:46:29.076 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-16 22:46:29.081 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 404 0 null 157.9963ms
2025-05-16 22:46:29.084 +03:00 [DBG] Connection id "0HNCKM980QOS4" reset.
2025-05-16 22:46:29.090 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7000/chat.ChatService/UserChatExists, Response status code: 404
2025-05-16 22:46:29.095 +03:00 [DBG] The connection queue processing loop for 0HNCKM980QOS4 completed.
2025-05-16 22:46:29.095 +03:00 [DBG] Connection id "0HNCKM980QOS4" is closed. The last processed stream ID was 1.
2025-05-16 22:46:29.098 +03:00 [DBG] Connection id "0HNCKM980QOS4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:46:29.105 +03:00 [DBG] Connection id "0HNCKM980QOS4" stopped.
2025-05-16 22:51:09.009 +03:00 [DBG] Connection id "0HNCKM980QOS5" accepted.
2025-05-16 22:51:09.016 +03:00 [DBG] Connection id "0HNCKM980QOS5" started.
2025-05-16 22:51:10.277 +03:00 [DBG] Connection id "0HNCKM980QOS5": Invalid content received on connection. Possible incorrect HTTP version detected. Expected HTTP/2 but received HTTP/1.1.
2025-05-16 22:51:10.279 +03:00 [DBG] Connection id "0HNCKM980QOS5" is closed. The last processed stream ID was 0.
2025-05-16 22:51:10.280 +03:00 [DBG] Connection id "0HNCKM980QOS5" received FIN.
2025-05-16 22:51:10.282 +03:00 [DBG] The connection queue processing loop for 0HNCKM980QOS5 completed.
2025-05-16 22:51:10.282 +03:00 [DBG] Connection id "0HNCKM980QOS5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:51:10.295 +03:00 [DBG] Connection id "0HNCKM980QOS5" stopped.
2025-05-16 22:51:10.505 +03:00 [DBG] Connection id "0HNCKM980QOS6" accepted.
2025-05-16 22:51:10.506 +03:00 [DBG] Connection id "0HNCKM980QOS6" started.
2025-05-16 22:51:10.509 +03:00 [DBG] Connection id "0HNCKM980QOS6": Invalid content received on connection. Possible incorrect HTTP version detected. Expected HTTP/2 but received HTTP/1.1.
2025-05-16 22:51:10.511 +03:00 [DBG] Connection id "0HNCKM980QOS6" is closed. The last processed stream ID was 0.
2025-05-16 22:51:10.512 +03:00 [DBG] Connection id "0HNCKM980QOS6" received FIN.
2025-05-16 22:51:10.513 +03:00 [DBG] The connection queue processing loop for 0HNCKM980QOS6 completed.
2025-05-16 22:51:10.515 +03:00 [DBG] Connection id "0HNCKM980QOS6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:51:10.530 +03:00 [DBG] Connection id "0HNCKM980QOS6" stopped.
2025-05-16 22:51:14.716 +03:00 [DBG] Connection id "0HNCKM980QOS7" accepted.
2025-05-16 22:51:14.719 +03:00 [DBG] Connection id "0HNCKM980QOS7" started.
2025-05-16 22:51:16.060 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7001/ - null null
2025-05-16 22:51:16.062 +03:00 [DBG] No candidates found for the request path '/'
2025-05-16 22:51:16.063 +03:00 [DBG] Request did not match any endpoints
2025-05-16 22:51:16.069 +03:00 [DBG] The request path  does not match the path filter
2025-05-16 22:51:16.071 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-05-16 22:51:16.073 +03:00 [DBG] Connection id "0HNCKM980QOS7" completed keep alive response.
2025-05-16 22:51:16.074 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7001/ - 404 0 null 14.0762ms
2025-05-16 22:51:16.078 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7001/, Response status code: 404
2025-05-16 22:51:17.302 +03:00 [DBG] Connection id "0HNCKM980QOS7" received FIN.
2025-05-16 22:51:17.303 +03:00 [DBG] Connection id "0HNCKM980QOS7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:51:17.306 +03:00 [DBG] Connection id "0HNCKM980QOS7" disconnecting.
2025-05-16 22:51:17.308 +03:00 [DBG] Connection id "0HNCKM980QOS7" stopped.
2025-05-16 22:52:42.099 +03:00 [INF] Application is shutting down...
2025-05-16 22:52:42.101 +03:00 [DBG] Hosting stopping
2025-05-16 22:52:42.111 +03:00 [DBG] Hosting stopped
2025-05-16 22:55:22.320 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-16 22:55:22.461 +03:00 [DBG] Hosting starting
2025-05-16 22:55:22.478 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 22:55:22.493 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-16 22:55:22.502 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-16 22:55:22.512 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-16 22:55:22.518 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:55:22.523 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-16 22:55:22.526 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 22:55:22.537 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-16 22:55:22.540 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-16 22:55:22.542 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-16 22:55:22.545 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-16 22:55:22.613 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-16 22:55:22.616 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-16 22:55:22.618 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-16 22:55:22.619 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 22:55:22.620 +03:00 [INF] Hosting environment: Development
2025-05-16 22:55:22.621 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-16 22:55:22.622 +03:00 [DBG] Hosting started
2025-05-16 22:55:29.538 +03:00 [DBG] Connection id "0HNCKMEE1GU54" accepted.
2025-05-16 22:55:29.540 +03:00 [DBG] Connection id "0HNCKMEE1GU54" started.
2025-05-16 22:55:36.094 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 22:55:36.099 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-16 22:55:36.123 +03:00 [DBG] 3 candidate(s) found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:55:36.129 +03:00 [DBG] Endpoint 'gRPC - /chat.ChatService/UserChatExists' with route pattern '/chat.ChatService/UserChatExists' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:55:36.131 +03:00 [DBG] Endpoint 'gRPC - Unimplemented method for chat.ChatService' with route pattern 'chat.ChatService/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:55:36.133 +03:00 [DBG] Endpoint 'gRPC - Unimplemented service' with route pattern '{unimplementedService}/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:55:36.135 +03:00 [DBG] Request matched endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 22:55:36.155 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-16 22:55:36.266 +03:00 [DBG] Successfully validated the token.
2025-05-16 22:55:36.268 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-16 22:55:36.274 +03:00 [DBG] Authorization was successful.
2025-05-16 22:55:36.277 +03:00 [INF] Executing endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 22:55:36.290 +03:00 [DBG] Reading message.
2025-05-16 22:55:36.293 +03:00 [DBG] Connection id "0HNCKMEE1GU54", Request id "0HNCKMEE1GU54:00000001": started reading request body.
2025-05-16 22:55:36.294 +03:00 [DBG] Connection id "0HNCKMEE1GU54", Request id "0HNCKMEE1GU54:00000001": done reading request body.
2025-05-16 22:55:36.323 +03:00 [INF] (gRPC) Checking if user is in chat
2025-05-16 22:55:36.531 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-16 22:55:36.956 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:55:37.002 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:55:37.124 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:55:37.223 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:55:37.226 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 22:55:37.266 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-05-16 22:55:37.269 +03:00 [DBG] The index {'UserId'} was not created on entity type 'UserContactEntity' as the properties are already covered by the index {'UserId', 'ContactId'}.
2025-05-16 22:55:37.450 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-05-16 22:55:37.600 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-16 22:55:37.692 +03:00 [DBG] Compiling query expression: 
'DbSet<UserChatEntity>()
    .Any(el => el.UserId == __userId_0 && el.ChatId == __chatId_1)'
2025-05-16 22:55:37.993 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM UserChat AS u
                WHERE (u.UserId == @__userId_0) && (u.ChatId == @__chatId_1))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM UserChat AS u
                WHERE (u.UserId == @__userId_0) && (u.ChatId == @__chatId_1)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-16 22:55:38.075 +03:00 [DBG] Creating DbConnection.
2025-05-16 22:55:38.110 +03:00 [DBG] Created DbConnection. (30ms).
2025-05-16 22:55:38.116 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:55:39.001 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:55:39.011 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-16 22:55:39.021 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-05-16 22:55:39.032 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-05-16 22:55:39.045 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 22:55:39.110 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 22:55:39.138 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:55:39.149 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 28ms reading results.
2025-05-16 22:55:39.156 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:55:39.166 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (9ms).
2025-05-16 22:55:39.173 +03:00 [INF] (gRPC) If user "e9bbd91a-052c-45bf-be52-0c9fe45da4bb" is in chat "12345678-aaaa-bbbb-cccc-1234567890ab". Result of query : Application.Common.Result`1[System.Boolean]
2025-05-16 22:55:39.180 +03:00 [DBG] Sending message.
2025-05-16 22:55:39.191 +03:00 [INF] Executed endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 22:55:39.204 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-16 22:55:39.211 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:55:39.214 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-16 22:55:39.217 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 200 null application/grpc 3124.4963ms
2025-05-16 22:57:44.611 +03:00 [DBG] Connection id "0HNCKMEE1GU54" reset.
2025-05-16 22:57:44.615 +03:00 [DBG] Connection id "0HNCKMEE1GU54" is closed. The last processed stream ID was 1.
2025-05-16 22:57:44.616 +03:00 [DBG] The connection queue processing loop for 0HNCKMEE1GU54 completed.
2025-05-16 22:57:44.617 +03:00 [DBG] Connection id "0HNCKMEE1GU54" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 22:57:44.626 +03:00 [DBG] Connection id "0HNCKMEE1GU54" stopped.
2025-05-16 22:57:47.269 +03:00 [DBG] Connection id "0HNCKMEE1GU55" accepted.
2025-05-16 22:57:47.270 +03:00 [DBG] Connection id "0HNCKMEE1GU55" started.
2025-05-16 22:57:50.971 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 22:57:50.974 +03:00 [DBG] 3 candidate(s) found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:57:50.975 +03:00 [DBG] Endpoint 'gRPC - /chat.ChatService/UserChatExists' with route pattern '/chat.ChatService/UserChatExists' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:57:50.976 +03:00 [DBG] Endpoint 'gRPC - Unimplemented method for chat.ChatService' with route pattern 'chat.ChatService/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:57:50.978 +03:00 [DBG] Endpoint 'gRPC - Unimplemented service' with route pattern '{unimplementedService}/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 22:57:50.980 +03:00 [DBG] Request matched endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 22:57:50.982 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-16 22:57:50.984 +03:00 [DBG] Successfully validated the token.
2025-05-16 22:57:50.985 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-16 22:57:50.989 +03:00 [DBG] Authorization was successful.
2025-05-16 22:57:50.990 +03:00 [INF] Executing endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 22:57:50.991 +03:00 [DBG] Reading message.
2025-05-16 22:57:50.991 +03:00 [DBG] Connection id "0HNCKMEE1GU55", Request id "0HNCKMEE1GU55:00000001": started reading request body.
2025-05-16 22:57:50.993 +03:00 [DBG] Connection id "0HNCKMEE1GU55", Request id "0HNCKMEE1GU55:00000001": done reading request body.
2025-05-16 22:57:50.995 +03:00 [INF] (gRPC) Checking if user is in chat
2025-05-16 22:57:51.052 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-16 22:57:51.058 +03:00 [DBG] Creating DbConnection.
2025-05-16 22:57:51.059 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-16 22:57:51.060 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:57:51.063 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:57:51.064 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-16 22:57:51.065 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-16 22:57:51.067 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-16 22:57:51.068 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 22:57:51.072 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 22:57:51.073 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:57:51.074 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-05-16 22:57:51.075 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:57:51.077 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-05-16 22:57:51.079 +03:00 [INF] (gRPC) If user "e9bbd91a-052c-45bf-be52-0c9fe45da4bb" is in chat "12345678-aaaa-bbbb-cccc-1234567890ab". Result of query : Application.Common.Result`1[System.Boolean]
2025-05-16 22:57:51.081 +03:00 [DBG] Sending message.
2025-05-16 22:57:51.082 +03:00 [INF] Executed endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 22:57:51.083 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-16 22:57:51.084 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 22:57:51.085 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-16 22:57:51.086 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 200 null application/grpc 115.6687ms
2025-05-16 23:00:02.297 +03:00 [DBG] Connection id "0HNCKMEE1GU55" is closing.
2025-05-16 23:00:02.298 +03:00 [DBG] Connection id "0HNCKMEE1GU55" is closed. The last processed stream ID was 1.
2025-05-16 23:00:02.300 +03:00 [DBG] The connection queue processing loop for 0HNCKMEE1GU55 completed.
2025-05-16 23:00:02.300 +03:00 [DBG] Connection id "0HNCKMEE1GU55" received FIN.
2025-05-16 23:00:02.301 +03:00 [DBG] Connection id "0HNCKMEE1GU55" stopped.
2025-05-16 23:00:02.303 +03:00 [DBG] Connection id "0HNCKMEE1GU55" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 23:00:23.303 +03:00 [INF] Application is shutting down...
2025-05-16 23:00:23.304 +03:00 [DBG] Hosting stopping
2025-05-16 23:00:23.320 +03:00 [DBG] Hosting stopped
2025-05-16 23:00:26.716 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-05-16 23:00:26.973 +03:00 [DBG] Hosting starting
2025-05-16 23:00:26.993 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 23:00:27.008 +03:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-481ef570-6c2e-4a6e-9762-cce7f7c8e8f9.xml'.
2025-05-16 23:00:27.017 +03:00 [DBG] Found key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9}.
2025-05-16 23:00:27.029 +03:00 [DBG] Considering key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} with expiration date 2025-06-12 18:14:50Z as default key.
2025-05-16 23:00:27.034 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 23:00:27.039 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-05-16 23:00:27.041 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-05-16 23:00:27.048 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-05-16 23:00:27.050 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-05-16 23:00:27.052 +03:00 [DBG] Using key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} as the default key.
2025-05-16 23:00:27.054 +03:00 [DBG] Key ring with default key {481ef570-6c2e-4a6e-9762-cce7f7c8e8f9} was loaded during application startup.
2025-05-16 23:00:27.135 +03:00 [INF] Now listening on: http://localhost:7000
2025-05-16 23:00:27.138 +03:00 [INF] Now listening on: http://localhost:7001
2025-05-16 23:00:27.140 +03:00 [DBG] Loaded hosting startup assembly API
2025-05-16 23:00:27.142 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 23:00:27.143 +03:00 [INF] Hosting environment: Development
2025-05-16 23:00:27.145 +03:00 [INF] Content root path: C:\Users\User\source\repos\DDD_Messanger\API
2025-05-16 23:00:27.147 +03:00 [DBG] Hosting started
2025-05-16 23:00:39.051 +03:00 [DBG] Connection id "0HNCKMHA98LS7" accepted.
2025-05-16 23:00:39.052 +03:00 [DBG] Connection id "0HNCKMHA98LS7" started.
2025-05-16 23:00:46.936 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 23:00:46.940 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-05-16 23:00:46.964 +03:00 [DBG] 3 candidate(s) found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:00:46.970 +03:00 [DBG] Endpoint 'gRPC - /chat.ChatService/UserChatExists' with route pattern '/chat.ChatService/UserChatExists' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:00:46.972 +03:00 [DBG] Endpoint 'gRPC - Unimplemented method for chat.ChatService' with route pattern 'chat.ChatService/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:00:46.973 +03:00 [DBG] Endpoint 'gRPC - Unimplemented service' with route pattern '{unimplementedService}/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:00:46.975 +03:00 [DBG] Request matched endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 23:00:46.994 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-16 23:00:47.100 +03:00 [DBG] Successfully validated the token.
2025-05-16 23:00:47.103 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-16 23:00:47.108 +03:00 [DBG] Authorization was successful.
2025-05-16 23:00:47.111 +03:00 [INF] Executing endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 23:00:47.123 +03:00 [DBG] Reading message.
2025-05-16 23:00:47.125 +03:00 [DBG] Connection id "0HNCKMHA98LS7", Request id "0HNCKMHA98LS7:00000001": started reading request body.
2025-05-16 23:00:47.127 +03:00 [DBG] Connection id "0HNCKMHA98LS7", Request id "0HNCKMHA98LS7:00000001": done reading request body.
2025-05-16 23:00:47.154 +03:00 [INF] (gRPC) Checking if user is in chat
2025-05-16 23:00:47.315 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-05-16 23:00:47.741 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 23:00:47.784 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 23:00:47.906 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 23:00:48.002 +03:00 [DBG] No relationship from 'UserContactEntity' to 'UserEntity' has been configured by convention because there are multiple properties on one entity type - {'Contact', 'User'} that could be matched with the properties on the other entity type - {'Contacts'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 23:00:48.006 +03:00 [DBG] No relationship from 'UserEntity' to 'UserContactEntity' has been configured by convention because there are multiple properties on one entity type - {'Contacts'} that could be matched with the properties on the other entity type - {'Contact', 'User'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-05-16 23:00:48.046 +03:00 [DBG] The index {'ChatId'} was not created on entity type 'UserChatEntity' as the properties are already covered by the index {'ChatId', 'UserId'}.
2025-05-16 23:00:48.048 +03:00 [DBG] The index {'UserId'} was not created on entity type 'UserContactEntity' as the properties are already covered by the index {'UserId', 'ContactId'}.
2025-05-16 23:00:48.227 +03:00 [WRN] The 'ChatRole' property 'ChatRole' on entity type 'UserChatEntity' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value 'Admin', since this is the CLR default for the 'ChatRole' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-05-16 23:00:48.379 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-16 23:00:48.473 +03:00 [DBG] Compiling query expression: 
'DbSet<UserChatEntity>()
    .Any(el => el.UserId == __userId_0 && el.ChatId == __chatId_1)'
2025-05-16 23:00:48.770 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM UserChat AS u
                WHERE (u.UserId == @__userId_0) && (u.ChatId == @__chatId_1))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM UserChat AS u
                WHERE (u.UserId == @__userId_0) && (u.ChatId == @__chatId_1)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: Infrastructure.Persistence.Contexts.MessengerDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-05-16 23:00:48.845 +03:00 [DBG] Creating DbConnection.
2025-05-16 23:00:48.875 +03:00 [DBG] Created DbConnection. (26ms).
2025-05-16 23:00:48.881 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:00:49.059 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:00:49.068 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-16 23:00:49.076 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-05-16 23:00:49.087 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2025-05-16 23:00:49.098 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 23:00:49.156 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 23:00:49.183 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:00:49.193 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 25ms reading results.
2025-05-16 23:00:49.199 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:00:49.208 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (8ms).
2025-05-16 23:00:49.215 +03:00 [INF] (gRPC) If user "e9bbd91a-052c-45bf-be52-0c9fe45da4bb" is in chat "12345678-aaaa-bbbb-cccc-1234567890ab". Result of query : Application.Common.Result`1[System.Boolean]
2025-05-16 23:00:49.220 +03:00 [DBG] Sending message.
2025-05-16 23:00:49.232 +03:00 [INF] Executed endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 23:00:49.243 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-16 23:00:49.250 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:00:49.253 +03:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-05-16 23:00:49.256 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 200 null application/grpc 2321.27ms
2025-05-16 23:01:15.308 +03:00 [INF] Request starting HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - application/grpc null
2025-05-16 23:01:15.312 +03:00 [DBG] 3 candidate(s) found for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:01:15.313 +03:00 [DBG] Endpoint 'gRPC - /chat.ChatService/UserChatExists' with route pattern '/chat.ChatService/UserChatExists' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:01:15.315 +03:00 [DBG] Endpoint 'gRPC - Unimplemented method for chat.ChatService' with route pattern 'chat.ChatService/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:01:15.316 +03:00 [DBG] Endpoint 'gRPC - Unimplemented service' with route pattern '{unimplementedService}/{unimplementedMethod:grpcunimplemented}' is valid for the request path '/chat.ChatService/UserChatExists'
2025-05-16 23:01:15.318 +03:00 [DBG] Request matched endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 23:01:15.320 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-05-16 23:01:15.322 +03:00 [DBG] Successfully validated the token.
2025-05-16 23:01:15.323 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-05-16 23:01:15.326 +03:00 [DBG] Authorization was successful.
2025-05-16 23:01:15.327 +03:00 [INF] Executing endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 23:01:15.329 +03:00 [DBG] Reading message.
2025-05-16 23:01:15.330 +03:00 [DBG] Connection id "0HNCKMHA98LS7", Request id "0HNCKMHA98LS7:00000003": started reading request body.
2025-05-16 23:01:15.332 +03:00 [DBG] Connection id "0HNCKMHA98LS7", Request id "0HNCKMHA98LS7:00000003": done reading request body.
2025-05-16 23:01:15.334 +03:00 [INF] (gRPC) Checking if user is in chat
2025-05-16 23:01:15.390 +03:00 [DBG] Entity Framework Core 9.0.3 initialized 'MessengerDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.3' with options: EngineType=SqlServer using lazy loading proxies 
2025-05-16 23:01:15.396 +03:00 [DBG] Creating DbConnection.
2025-05-16 23:01:15.397 +03:00 [DBG] Created DbConnection. (1ms).
2025-05-16 23:01:15.398 +03:00 [DBG] Opening connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:01:15.401 +03:00 [DBG] Opened connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:01:15.402 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-05-16 23:01:15.403 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-05-16 23:01:15.405 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-05-16 23:01:15.407 +03:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 23:01:15.411 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__chatId_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserChat] AS [u]
        WHERE [u].[UserId] = @__userId_0 AND [u].[ChatId] = @__chatId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-16 23:01:15.414 +03:00 [DBG] Closing data reader to 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:01:15.415 +03:00 [DBG] A data reader for 'UserDB' on server '(localdb)\mssqllocaldb' is being disposed after spending 1ms reading results.
2025-05-16 23:01:15.417 +03:00 [DBG] Closing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:01:15.418 +03:00 [DBG] Closed connection to database 'UserDB' on server '(localdb)\mssqllocaldb' (1ms).
2025-05-16 23:01:15.421 +03:00 [INF] (gRPC) If user "e9bbd91a-052c-45bf-be52-0c9fe45da4bb" is in chat "07827b33-5985-4cf8-ad4d-b350efb57735". Result of query : Application.Common.Result`1[System.Boolean]
2025-05-16 23:01:15.423 +03:00 [DBG] Sending message.
2025-05-16 23:01:15.425 +03:00 [INF] Executed endpoint 'gRPC - /chat.ChatService/UserChatExists'
2025-05-16 23:01:15.426 +03:00 [DBG] 'MessengerDbContext' disposed.
2025-05-16 23:01:15.427 +03:00 [DBG] Disposing connection to database 'UserDB' on server '(localdb)\mssqllocaldb'.
2025-05-16 23:01:15.429 +03:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-05-16 23:01:15.430 +03:00 [INF] Request finished HTTP/2 POST http://localhost:7000/chat.ChatService/UserChatExists - 200 null application/grpc 121.9534ms
2025-05-16 23:01:36.133 +03:00 [DBG] Connection id "0HNCKMHA98LS7" reset.
2025-05-16 23:01:36.136 +03:00 [DBG] The connection queue processing loop for 0HNCKMHA98LS7 completed.
2025-05-16 23:01:36.136 +03:00 [DBG] Connection id "0HNCKMHA98LS7" is closed. The last processed stream ID was 3.
2025-05-16 23:01:36.139 +03:00 [DBG] Connection id "0HNCKMHA98LS7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-05-16 23:01:36.156 +03:00 [DBG] Connection id "0HNCKMHA98LS7" stopped.
2025-05-16 23:08:19.175 +03:00 [INF] Application is shutting down...
2025-05-16 23:08:19.177 +03:00 [DBG] Hosting stopping
2025-05-16 23:08:19.188 +03:00 [DBG] Hosting stopped
